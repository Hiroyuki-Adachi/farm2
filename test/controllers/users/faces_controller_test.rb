require "test_helper"

class Users::FacesControllerTest < ActionController::TestCase
  setup do
    setup_ip
  end

  test "顔登録(表示)" do
    get :new
    assert_response :success
  end

  test "顔登録(登録)" do
    assert_difference('FaceDescriptor.count') do
      post :create, params: { 
        face_descriptor: JSON.parse('{"0":-0.16907610595226288,"1":1.42413506954908371,"2":2.11125196725130081,"3":-0.020201148465275764,"4":-0.10624002665281296,"5":-0.10218002647161484,"6":-0.057028595358133316,"7":-0.11608768254518509,"8":0.10970506072044373,"9":-0.05970483273267746,"10":0.2662871181964874,"11":-0.08869510889053345,"12":-0.22625935077667236,"13":-0.0642118752002716,"14":-0.0715116485953331,"15":0.11022377014160156,"16":-0.17024032771587372,"17":-0.052208054810762405,"18":-0.05562223494052887,"19":-0.052563462406396866,"20":0.12018486857414246,"21":0.02754834294319153,"22":0.026840200647711754,"23":0.03817320242524147,"24":-0.05564289912581444,"25":-0.25830501317977905,"26":-0.11071456968784332,"27":-0.06498085707426071,"28":0.07023749500513077,"29":-0.10575015097856522,"30":-0.05110107734799385,"31":0.01548943854868412,"32":-0.17644347250461578,"33":-0.16842223703861237,"34":0.01486463937908411,"35":0.017889829352498055,"36":0.007983257994055748,"37":-0.09277253597974777,"38":0.1457824558019638,"39":0.009872724302113056,"40":-0.16038908064365387,"41":0.031241854652762413,"42":0.05972367152571678,"43":0.2794717848300934,"44":0.14605781435966492,"45":0.1291414499282837,"46":0.003683891147375107,"47":-0.12158837169408798,"48":0.12428274750709534,"49":-0.15906541049480438,"50":0.05243842303752899,"51":0.12755239009857178,"52":0.1663302481174469,"53":0.0027793010231107473,"54":0.07901285588741302,"55":-0.1562795341014862,"56":0.014117149636149406,"57":0.15269628167152405,"58":-0.17577290534973145,"59":0.05600079149007797,"60":0.08515743911266327,"61":-0.0030405689030885696,"62":0.04917977750301361,"63":-0.09782721847295761,"64":0.21641956269741058,"65":0.0957130417227745,"66":-0.0801628828048706,"67":-0.09425673633813858,"68":0.11696074157953262,"69":-0.11463619023561478,"70":-0.11346997320652008,"71":0.06102834269404411,"72":-0.12557236850261688,"73":-0.13104896247386932,"74":-0.30102431774139404,"75":0.0002791066362988204,"76":0.4108414649963379,"77":0.09227633476257324,"78":-0.16272284090518951,"79":-0.007821688428521156,"80":-0.03731819614768028,"81":-0.02164032682776451,"82":0.10402067005634308,"83":0.09694529324769974,"84":-0.12264177203178406,"85":0.0466768853366375,"86":-0.06809600442647934,"87":-0.008093861863017082,"88":0.18890129029750824,"89":-0.031125977635383606,"90":-0.04896741360425949,"91":0.2165459394454956,"92":-0.010094568133354187,"93":0.017061760649085045,"94":0.027957774698734283,"95":-0.04423893243074417,"96":-0.09890542924404144,"97":0.02624667063355446,"98":-0.1319943517446518,"99":-0.03297431021928787,"100":0.03664948791265488,"101":-0.08238916099071503,"102":0.0031236987560987473,"103":0.11383188515901566,"104":-0.19944947957992554,"105":0.006656494457274675,"106":-0.003703953931108117,"107":-0.020052824169397354,"108":-0.03200786933302879,"109":-0.026749324053525925,"110":-0.11398939788341522,"111":-0.014156033284962177,"112":0.14066185057163239,"113":-0.23756739497184753,"114":0.17497090995311737,"115":0.1721336543560028,"116":0.049831509590148926,"117":0.09227179735898972,"118":0.09919427335262299,"119":0.039194945245981216,"120":0.03217226639389992,"121":-0.035597626119852066,"122":-0.10629431158304214,"123":-0.06553652882575989,"124":0.12563590705394745,"125":-0.05450081452727318,"126":0.22164483964443207,"127":-0.022868998572230339}')
      }
    end
    assert_response :success
  end
end
