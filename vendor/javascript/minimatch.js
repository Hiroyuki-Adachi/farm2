import*as t from"path";import*as e from"brace-expansion";var r="default"in t?t.default:t;var a="default"in e?e.default:e;var n="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var i={};i=minimatch;minimatch.Minimatch=Minimatch;var s=function(){try{return r}catch(t){}}()||{sep:"/"};minimatch.sep=s.sep;var c=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={};var h=a;var o={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}};var u="[^/]";var f=u+"*?";var l="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";var p="(?:(?!(?:\\/|^)\\.).)*?";var m=charSet("().*{}+?[]^$\\!");function charSet(t){return t.split("").reduce((function(t,e){t[e]=true;return t}),{})}var g=/\/+/;minimatch.filter=filter;function filter(t,e){e=e||{};return function(r,a,n){return minimatch(r,t,e)}}function ext(t,e){e=e||{};var r={};Object.keys(t).forEach((function(e){r[e]=t[e]}));Object.keys(e).forEach((function(t){r[t]=e[t]}));return r}minimatch.defaults=function(t){if(!t||"object"!==typeof t||!Object.keys(t).length)return minimatch;var e=minimatch;var r=function minimatch(r,a,n){return e(r,a,ext(t,n))};r.Minimatch=function Minimatch(r,a){return new e.Minimatch(r,ext(t,a))};r.Minimatch.defaults=function defaults(r){return e.defaults(ext(t,r)).Minimatch};r.filter=function filter(r,a){return e.filter(r,ext(t,a))};r.defaults=function defaults(r){return e.defaults(ext(t,r))};r.makeRe=function makeRe(r,a){return e.makeRe(r,ext(t,a))};r.braceExpand=function braceExpand(r,a){return e.braceExpand(r,ext(t,a))};r.match=function(r,a,n){return e.match(r,a,ext(t,n))};return r};Minimatch.defaults=function(t){return minimatch.defaults(t).Minimatch};function minimatch(t,e,r){assertValidPattern(e);r||(r={});return!(!r.nocomment&&"#"===e.charAt(0))&&new Minimatch(e,r).match(t)}function Minimatch(t,e){if(!((this||n)instanceof Minimatch))return new Minimatch(t,e);assertValidPattern(t);e||(e={});t=t.trim();e.allowWindowsEscape||"/"===s.sep||(t=t.split(s.sep).join("/"));(this||n).options=e;(this||n).set=[];(this||n).pattern=t;(this||n).regexp=null;(this||n).negate=false;(this||n).comment=false;(this||n).empty=false;(this||n).partial=!!e.partial;this.make()}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){var t=(this||n).pattern;var e=(this||n).options;if(e.nocomment||"#"!==t.charAt(0))if(t){this.parseNegate();var r=(this||n).globSet=this.braceExpand();e.debug&&((this||n).debug=function debug(){console.error.apply(console,arguments)});this.debug((this||n).pattern,r);r=(this||n).globParts=r.map((function(t){return t.split(g)}));this.debug((this||n).pattern,r);r=r.map((function(t,e,r){return t.map((this||n).parse,this||n)}),this||n);this.debug((this||n).pattern,r);r=r.filter((function(t){return-1===t.indexOf(false)}));this.debug((this||n).pattern,r);(this||n).set=r}else(this||n).empty=true;else(this||n).comment=true}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var t=(this||n).pattern;var e=false;var r=(this||n).options;var a=0;if(!r.nonegate){for(var i=0,s=t.length;i<s&&"!"===t.charAt(i);i++){e=!e;a++}a&&((this||n).pattern=t.substr(a));(this||n).negate=e}}minimatch.braceExpand=function(t,e){return braceExpand(t,e)};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(t,e){e||(e=(this||n)instanceof Minimatch?(this||n).options:{});t="undefined"===typeof t?(this||n).pattern:t;assertValidPattern(t);return e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:h(t)}var d=65536;var assertValidPattern=function(t){if("string"!==typeof t)throw new TypeError("invalid pattern");if(t.length>d)throw new TypeError("pattern is too long")};Minimatch.prototype.parse=parse;var v={};function parse(t,e){assertValidPattern(t);var r=(this||n).options;if("**"===t){if(!r.noglobstar)return c;t="*"}if(""===t)return"";var a="";var i=!!r.nocase;var s=false;var h=[];var l=[];var p;var g=false;var d=-1;var b=-1;var x="."===t.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)";var y=this||n;function clearStateChar(){if(p){switch(p){case"*":a+=f;i=true;break;case"?":a+=u;i=true;break;default:a+="\\"+p;break}y.debug("clearStateChar %j %j",p,a);p=false}}for(var E,M=0,w=t.length;M<w&&(E=t.charAt(M));M++){this.debug("%s\t%s %s %j",t,M,a,E);if(s&&m[E]){a+="\\"+E;s=false}else switch(E){case"/":return false;case"\\":clearStateChar();s=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s\t%s %s %j <-- stateChar",t,M,a,E);if(g){this.debug("  in class");"!"===E&&M===b+1&&(E="^");a+=E;continue}y.debug("call clearStateChar %j",p);clearStateChar();p=E;r.noext&&clearStateChar();continue;case"(":if(g){a+="(";continue}if(!p){a+="\\(";continue}h.push({type:p,start:M-1,reStart:a.length,open:o[p].open,close:o[p].close});a+="!"===p?"(?:(?!(?:":"(?:";this.debug("plType %j %j",p,a);p=false;continue;case")":if(g||!h.length){a+="\\)";continue}clearStateChar();i=true;var S=h.pop();a+=S.close;"!"===S.type&&l.push(S);S.reEnd=a.length;continue;case"|":if(g||!h.length||s){a+="\\|";s=false;continue}clearStateChar();a+="|";continue;case"[":clearStateChar();if(g){a+="\\"+E;continue}g=true;b=M;d=a.length;a+=E;continue;case"]":if(M===b+1||!g){a+="\\"+E;s=false;continue}var k=t.substring(b+1,M);try{RegExp("["+k+"]")}catch(t){var j=this.parse(k,v);a=a.substr(0,d)+"\\["+j[0]+"\\]";i=i||j[1];g=false;continue}i=true;g=false;a+=E;continue;default:clearStateChar();s?s=false:!m[E]||"^"===E&&g||(a+="\\");a+=E}}if(g){k=t.substr(b+1);j=this.parse(k,v);a=a.substr(0,d)+"\\["+j[0];i=i||j[1]}for(S=h.pop();S;S=h.pop()){var R=a.slice(S.reStart+S.open.length);this.debug("setting tail",a,S);R=R.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(t,e,r){r||(r="\\");return e+e+r+"|"}));this.debug("tail=%j\n   %s",R,R,S,a);var O="*"===S.type?f:"?"===S.type?u:"\\"+S.type;i=true;a=a.slice(0,S.reStart)+O+"\\("+R}clearStateChar();s&&(a+="\\\\");var C=false;switch(a.charAt(0)){case"[":case".":case"(":C=true}for(var A=l.length-1;A>-1;A--){var $=l[A];var T=a.slice(0,$.reStart);var N=a.slice($.reStart,$.reEnd-8);var B=a.slice($.reEnd-8,$.reEnd);var G=a.slice($.reEnd);B+=G;var L=T.split("(").length-1;var _=G;for(M=0;M<L;M++)_=_.replace(/\)[+*?]?/,"");G=_;var U="";""===G&&e!==v&&(U="$");var P=T+N+G+U+B;a=P}""!==a&&i&&(a="(?=.)"+a);C&&(a=x+a);if(e===v)return[a,i];if(!i)return globUnescape(t);var W=r.nocase?"i":"";try{var q=new RegExp("^"+a+"$",W)}catch(t){return new RegExp("$.")}q._glob=t;q._src=a;return q}minimatch.makeRe=function(t,e){return new Minimatch(t,e||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if((this||n).regexp||false===(this||n).regexp)return(this||n).regexp;var t=(this||n).set;if(!t.length){(this||n).regexp=false;return(this||n).regexp}var e=(this||n).options;var r=e.noglobstar?f:e.dot?l:p;var a=e.nocase?"i":"";var i=t.map((function(t){return t.map((function(t){return t===c?r:"string"===typeof t?regExpEscape(t):t._src})).join("\\/")})).join("|");i="^(?:"+i+")$";(this||n).negate&&(i="^(?!"+i+").*$");try{(this||n).regexp=new RegExp(i,a)}catch(t){(this||n).regexp=false}return(this||n).regexp}minimatch.match=function(t,e,r){r=r||{};var a=new Minimatch(e,r);t=t.filter((function(t){return a.match(t)}));a.options.nonull&&!t.length&&t.push(e);return t};Minimatch.prototype.match=function match(t,e){"undefined"===typeof e&&(e=(this||n).partial);this.debug("match",t,(this||n).pattern);if((this||n).comment)return false;if((this||n).empty)return""===t;if("/"===t&&e)return true;var r=(this||n).options;"/"!==s.sep&&(t=t.split(s.sep).join("/"));t=t.split(g);this.debug((this||n).pattern,"split",t);var a=(this||n).set;this.debug((this||n).pattern,"set",a);var i;var c;for(c=t.length-1;c>=0;c--){i=t[c];if(i)break}for(c=0;c<a.length;c++){var h=a[c];var o=t;r.matchBase&&1===h.length&&(o=[i]);var u=this.matchOne(o,h,e);if(u)return!!r.flipNegate||!(this||n).negate}return!r.flipNegate&&(this||n).negate};Minimatch.prototype.matchOne=function(t,e,r){var a=(this||n).options;this.debug("matchOne",{this:this||n,file:t,pattern:e});this.debug("matchOne",t.length,e.length);for(var i=0,s=0,h=t.length,o=e.length;i<h&&s<o;i++,s++){this.debug("matchOne loop");var u=e[s];var f=t[i];this.debug(e,u,f);if(false===u)return false;if(u===c){this.debug("GLOBSTAR",[e,u,f]);var l=i;var p=s+1;if(p===o){this.debug("** at the end");for(;i<h;i++)if("."===t[i]||".."===t[i]||!a.dot&&"."===t[i].charAt(0))return false;return true}while(l<h){var m=t[l];this.debug("\nglobstar while",t,l,e,p,m);if(this.matchOne(t.slice(l),e.slice(p),r)){this.debug("globstar found match!",l,h,m);return true}if("."===m||".."===m||!a.dot&&"."===m.charAt(0)){this.debug("dot detected!",t,l,e,p);break}this.debug("globstar swallow a segment, and continue");l++}if(r){this.debug("\n>>> no match, partial?",t,l,e,p);if(l===h)return true}return false}var g;if("string"===typeof u){g=f===u;this.debug("string match",u,f,g)}else{g=f.match(u);this.debug("pattern match",u,f,g)}if(!g)return false}if(i===h&&s===o)return true;if(i===h)return r;if(s===o)return i===h-1&&""===t[i];throw new Error("wtf?")};function globUnescape(t){return t.replace(/\\(.)/g,"$1")}function regExpEscape(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}var b=i;export{b as default};

