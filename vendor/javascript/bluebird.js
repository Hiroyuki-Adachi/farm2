import _process from"process";var _global="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var exports={};var process=_process;
/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2018 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */!function(t){exports=t()}((function(){var define,module,exports;return function e(t,r,o){function s(i,a){if(!r[i]){if(!t[i]){var l="function"==typeof _dereq_&&_dereq_;if(!a&&l)return l(i,!0);if(n)return n(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[i]={exports:{}};t[i][0].call(u.exports,(function(r){var o=t[i][1][r];return s(o||r)}),u,u.exports,e,t,r,o)}return r[i].exports}var n="function"==typeof _dereq_&&_dereq_;for(var i=0;i<o.length;i++)s(o[i]);return s}({1:[function(t,r,o){r.exports=function(t){var r=t._SomePromiseArray;function any(t){var o=new r(t);var n=o.promise();o.setHowMany(1);o.setUnwrap();o.init();return n}t.any=function(t){return any(t)};t.prototype.any=function(){return any(this||_global)}}},{}],2:[function(t,r,o){var n;try{throw new Error}catch(t){n=t}var i=t("./schedule");var a=t("./queue");function Async(){(this||_global)._customScheduler=false;(this||_global)._isTickUsed=false;(this||_global)._lateQueue=new a(16);(this||_global)._normalQueue=new a(16);(this||_global)._haveDrainedQueues=false;var t=this||_global;(this||_global).drainQueues=function(){t._drainQueues()};(this||_global)._schedule=i}Async.prototype.setScheduler=function(t){var r=(this||_global)._schedule;(this||_global)._schedule=t;(this||_global)._customScheduler=true;return r};Async.prototype.hasCustomScheduler=function(){return(this||_global)._customScheduler};Async.prototype.haveItemsQueued=function(){return(this||_global)._isTickUsed||(this||_global)._haveDrainedQueues};Async.prototype.fatalError=function(t,r){if(r){process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n");process.exit(2)}else this.throwLater(t)};Async.prototype.throwLater=function(t,r){if(1===arguments.length){r=t;t=function(){throw r}}if("undefined"!==typeof setTimeout)setTimeout((function(){t(r)}),0);else try{this._schedule((function(){t(r)}))}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}};function AsyncInvokeLater(t,r,o){(this||_global)._lateQueue.push(t,r,o);this._queueTick()}function AsyncInvoke(t,r,o){(this||_global)._normalQueue.push(t,r,o);this._queueTick()}function AsyncSettlePromises(t){(this||_global)._normalQueue._pushOne(t);this._queueTick()}Async.prototype.invokeLater=AsyncInvokeLater;Async.prototype.invoke=AsyncInvoke;Async.prototype.settlePromises=AsyncSettlePromises;function _drainQueue(t){while(t.length()>0)_drainQueueStep(t)}function _drainQueueStep(t){var r=t.shift();if("function"!==typeof r)r._settlePromises();else{var o=t.shift();var n=t.shift();r.call(o,n)}}Async.prototype._drainQueues=function(){_drainQueue((this||_global)._normalQueue);this._reset();(this||_global)._haveDrainedQueues=true;_drainQueue((this||_global)._lateQueue)};Async.prototype._queueTick=function(){if(!(this||_global)._isTickUsed){(this||_global)._isTickUsed=true;this._schedule((this||_global).drainQueues)}};Async.prototype._reset=function(){(this||_global)._isTickUsed=false};r.exports=Async;r.exports.firstLineError=n},{"./queue":26,"./schedule":29}],3:[function(t,r,o){r.exports=function(t,r,o,n){var i=false;var rejectThis=function(t,r){this._reject(r)};var targetRejected=function(t,r){r.promiseRejectionQueued=true;r.bindingPromise._then(rejectThis,rejectThis,null,this||_global,t)};var bindingResolved=function(t,r){0===(50397184&(this||_global)._bitField)&&this._resolveCallback(r.target)};var bindingRejected=function(t,r){r.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(a){if(!i){i=true;t.prototype._propagateFrom=n.propagateFromFunction();t.prototype._boundValue=n.boundValueFunction()}var l=o(a);var c=new t(r);c._propagateFrom(this||_global,1);var u=this._target();c._setBoundTo(l);if(l instanceof t){var p={promiseRejectionQueued:false,promise:c,target:u,bindingPromise:l};u._then(r,targetRejected,void 0,c,p);l._then(bindingResolved,bindingRejected,void 0,c,p);c._setOnCancel(l)}else c._resolveCallback(u);return c};t.prototype._setBoundTo=function(t){if(void 0!==t){(this||_global)._bitField=2097152|(this||_global)._bitField;(this||_global)._boundTo=t}else(this||_global)._bitField=~2097152&(this||_global)._bitField};t.prototype._isBound=function(){return 2097152===(2097152&(this||_global)._bitField)};t.bind=function(r,o){return t.resolve(o).bind(r)}}},{}],4:[function(t,r,o){var n;"undefined"!==typeof Promise&&(n=Promise);function noConflict(){try{Promise===i&&(Promise=n)}catch(t){}return i}var i=t("./promise")();i.noConflict=noConflict;r.exports=i},{"./promise":22}],5:[function(t,r,o){var n=Object.create;if(n){var i=n(null);var a=n(null);i[" size"]=a[" size"]=0}r.exports=function(r){var o=t("./util");var n=o.canEvaluate;var l=o.isIdentifier;var c;var u;if(!true){var makeMethodCaller=function(t){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,t))(ensureMethod)};var makeGetter=function(t){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",t))};var getCompiled=function(t,r,o){var n=o[t];if("function"!==typeof n){if(!l(t))return null;n=r(t);o[t]=n;o[" size"]++;if(o[" size"]>512){var i=Object.keys(o);for(var a=0;a<256;++a)delete o[i[a]];o[" size"]=i.length-256}}return n};c=function(t){return getCompiled(t,makeMethodCaller,i)};u=function(t){return getCompiled(t,makeGetter,a)}}function ensureMethod(t,n){var i;null!=t&&(i=t[n]);if("function"!==typeof i){var a="Object "+o.classString(t)+" has no method '"+o.toString(n)+"'";throw new r.TypeError(a)}return i}function caller(t){var r=this.pop();var o=ensureMethod(t,r);return o.apply(t,this||_global)}r.prototype.call=function(t){var r=[].slice.call(arguments,1);if(!true&&n){var o=c(t);if(null!==o)return this._then(o,void 0,void 0,r,void 0)}r.push(t);return this._then(caller,void 0,void 0,r,void 0)};function namedGetter(t){return t[this||_global]}function indexedGetter(t){var r=+(this||_global);r<0&&(r=Math.max(0,r+t.length));return t[r]}r.prototype.get=function(t){var r="number"===typeof t;var o;if(r)o=indexedGetter;else if(n){var i=u(t);o=null!==i?i:namedGetter}else o=namedGetter;return this._then(o,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,r,o){r.exports=function(r,o,n,i){var a=t("./util");var l=a.tryCatch;var c=a.errorObj;var u=r._async;r.prototype["break"]=r.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");var t=this||_global;var r=t;while(t._isCancellable()){if(!t._cancelBy(r)){r._isFollowing()?r._followee().cancel():r._cancelBranched();break}var o=t._cancellationParent;if(null==o||!o._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel();t._setWillBeCancelled();r=t;t=o}};r.prototype._branchHasCancelled=function(){(this||_global)._branchesRemainingToCancel--};r.prototype._enoughBranchesHaveCancelled=function(){return void 0===(this||_global)._branchesRemainingToCancel||(this||_global)._branchesRemainingToCancel<=0};r.prototype._cancelBy=function(t){if(t===(this||_global)){(this||_global)._branchesRemainingToCancel=0;this._invokeOnCancel();return true}this._branchHasCancelled();if(this._enoughBranchesHaveCancelled()){this._invokeOnCancel();return true}return false};r.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()};r.prototype._cancel=function(){if(this._isCancellable()){this._setCancelled();u.invoke((this||_global)._cancelPromises,this||_global,void 0)}};r.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()};r.prototype._unsetOnCancel=function(){(this||_global)._onCancelField=void 0};r.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()};r.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()};r.prototype._doInvokeOnCancel=function(t,r){if(a.isArray(t))for(var o=0;o<t.length;++o)this._doInvokeOnCancel(t[o],r);else if(void 0!==t)if("function"===typeof t){if(!r){var n=l(t).call(this._boundValue());if(n===c){this._attachExtraTrace(n.e);u.throwLater(n.e)}}}else t._resultCancelled(this||_global)};r.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel();u.invoke((this||_global)._doInvokeOnCancel,this||_global,t)};r.prototype._invokeInternalOnCancel=function(){if(this._isCancellable()){this._doInvokeOnCancel(this._onCancel(),true);this._unsetOnCancel()}};r.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,r,o){r.exports=function(r){var o=t("./util");var n=t("./es5").keys;var i=o.tryCatch;var a=o.errorObj;function catchFilter(t,l,c){return function(u){var p=c._boundValue();e:for(var _=0;_<t.length;++_){var f=t[_];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return i(l).call(p,u)}else if("function"===typeof f){var h=i(f).call(p,u);if(h===a)return h;if(h)return i(l).call(p,u)}else if(o.isObject(u)){var v=n(f);for(var d=0;d<v.length;++d){var g=v[d];if(f[g]!=u[g])continue e}return i(l).call(p,u)}}return r}}return catchFilter}},{"./es5":13,"./util":36}],8:[function(t,r,o){r.exports=function(t){var r=false;var o=[];t.prototype._promiseCreated=function(){};t.prototype._pushContext=function(){};t.prototype._popContext=function(){return null};t._peekContext=t.prototype._peekContext=function(){};function Context(){(this||_global)._trace=new Context.CapturedTrace(peekContext())}Context.prototype._pushContext=function(){if(void 0!==(this||_global)._trace){(this||_global)._trace._promiseCreated=null;o.push((this||_global)._trace)}};Context.prototype._popContext=function(){if(void 0!==(this||_global)._trace){var t=o.pop();var r=t._promiseCreated;t._promiseCreated=null;return r}return null};function createContext(){if(r)return new Context}function peekContext(){var t=o.length-1;if(t>=0)return o[t]}Context.CapturedTrace=null;Context.create=createContext;Context.deactivateLongStackTraces=function(){};Context.activateLongStackTraces=function(){var o=t.prototype._pushContext;var n=t.prototype._popContext;var i=t._peekContext;var a=t.prototype._peekContext;var l=t.prototype._promiseCreated;Context.deactivateLongStackTraces=function(){t.prototype._pushContext=o;t.prototype._popContext=n;t._peekContext=i;t.prototype._peekContext=a;t.prototype._promiseCreated=l;r=false};r=true;t.prototype._pushContext=Context.prototype._pushContext;t.prototype._popContext=Context.prototype._popContext;t._peekContext=t.prototype._peekContext=peekContext;t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this||_global)}};return Context}},{}],9:[function(t,r,o){r.exports=function(r,o,n,i){var a=r._async;var l=t("./errors").Warning;var c=t("./util");var u=t("./es5");var p=c.canAttachTrace;var _;var f;var h=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/;var v=/\((?:timers\.js):\d+:\d+\)/;var d=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/;var g=null;var b=null;var y=false;var m;var P=!!(0!=c.env("BLUEBIRD_DEBUG")&&(true||c.env("BLUEBIRD_DEBUG")||"development"===c.env("NODE_ENV")));var C=!!(0!=c.env("BLUEBIRD_WARNINGS")&&(P||c.env("BLUEBIRD_WARNINGS")));var w=!!(0!=c.env("BLUEBIRD_LONG_STACK_TRACES")&&(P||c.env("BLUEBIRD_LONG_STACK_TRACES")));var j=0!=c.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(C||!!c.env("BLUEBIRD_W_FORGOTTEN_RETURN"));var k;(function(){var t=[];function unhandledRejectionCheck(){for(var r=0;r<t.length;++r)t[r]._notifyUnhandledRejection();unhandledRejectionClear()}function unhandledRejectionClear(){t.length=0}k=function(r){t.push(r);setTimeout(unhandledRejectionCheck,1)};u.defineProperty(r,"_unhandledRejectionCheck",{value:unhandledRejectionCheck});u.defineProperty(r,"_unhandledRejectionClear",{value:unhandledRejectionClear})})();r.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=~1048576&t._bitField|524288};r.prototype._ensurePossibleRejectionHandled=function(){if(0===(524288&(this||_global)._bitField)){this._setRejectionIsUnhandled();k(this||_global)}};r.prototype._notifyUnhandledRejectionIsHandled=function(){fireRejectionEvent("rejectionHandled",_,void 0,this||_global)};r.prototype._setReturnedNonUndefined=function(){(this||_global)._bitField=268435456|(this||_global)._bitField};r.prototype._returnedNonUndefined=function(){return 0!==(268435456&(this||_global)._bitField)};r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified();fireRejectionEvent("unhandledRejection",f,t,this||_global)}};r.prototype._setUnhandledRejectionIsNotified=function(){(this||_global)._bitField=262144|(this||_global)._bitField};r.prototype._unsetUnhandledRejectionIsNotified=function(){(this||_global)._bitField=~262144&(this||_global)._bitField};r.prototype._isUnhandledRejectionNotified=function(){return(262144&(this||_global)._bitField)>0};r.prototype._setRejectionIsUnhandled=function(){(this||_global)._bitField=1048576|(this||_global)._bitField};r.prototype._unsetRejectionIsUnhandled=function(){(this||_global)._bitField=~1048576&(this||_global)._bitField;if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled()}};r.prototype._isRejectionUnhandled=function(){return(1048576&(this||_global)._bitField)>0};r.prototype._warn=function(t,r,o){return warn(t,r,o||this||_global)};r.onPossiblyUnhandledRejection=function(t){var o=r._getContext();f=c.contextBind(o,t)};r.onUnhandledRejectionHandled=function(t){var o=r._getContext();_=c.contextBind(o,t)};var disableLongStackTraces=function(){};r.longStackTraces=function(){if(a.haveItemsQueued()&&!D.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!D.longStackTraces&&longStackTracesIsSupported()){var t=r.prototype._captureStackTrace;var n=r.prototype._attachExtraTrace;var i=r.prototype._dereferenceTrace;D.longStackTraces=true;disableLongStackTraces=function(){if(a.haveItemsQueued()&&!D.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");r.prototype._captureStackTrace=t;r.prototype._attachExtraTrace=n;r.prototype._dereferenceTrace=i;o.deactivateLongStackTraces();D.longStackTraces=false};r.prototype._captureStackTrace=longStackTracesCaptureStackTrace;r.prototype._attachExtraTrace=longStackTracesAttachExtraTrace;r.prototype._dereferenceTrace=longStackTracesDereferenceTrace;o.activateLongStackTraces()}};r.hasLongStackTraces=function(){return D.longStackTraces&&longStackTracesIsSupported()};var E={unhandledrejection:{before:function(){var t=c.global.onunhandledrejection;c.global.onunhandledrejection=null;return t},after:function(t){c.global.onunhandledrejection=t}},rejectionhandled:{before:function(){var t=c.global.onrejectionhandled;c.global.onrejectionhandled=null;return t},after:function(t){c.global.onrejectionhandled=t}}};var A=function(){var dispatch=function(t,r){if(!t)return!c.global.dispatchEvent(r);var o;try{o=t.before();return!c.global.dispatchEvent(r)}finally{t.after(o)}};try{if("function"===typeof CustomEvent){var t=new CustomEvent("CustomEvent");c.global.dispatchEvent(t);return function(t,r){t=t.toLowerCase();var o={detail:r,cancelable:true};var n=new CustomEvent(t,o);u.defineProperty(n,"promise",{value:r.promise});u.defineProperty(n,"reason",{value:r.reason});return dispatch(E[t],n)}}if("function"===typeof Event){var t=new Event("CustomEvent");c.global.dispatchEvent(t);return function(t,r){t=t.toLowerCase();var o=new Event(t,{cancelable:true});o.detail=r;u.defineProperty(o,"promise",{value:r.promise});u.defineProperty(o,"reason",{value:r.reason});return dispatch(E[t],o)}}var t=document.createEvent("CustomEvent");t.initCustomEvent("testingtheevent",false,true,{});c.global.dispatchEvent(t);return function(t,r){t=t.toLowerCase();var o=document.createEvent("CustomEvent");o.initCustomEvent(t,false,true,r);return dispatch(E[t],o)}}catch(t){}return function(){return false}}();var F=function(){return c.isNode?function(){return process.emit.apply(process,arguments)}:c.global?function(t){var r="on"+t.toLowerCase();var o=c.global[r];if(!o)return false;o.apply(c.global,[].slice.call(arguments,1));return true}:function(){return false}}();function generatePromiseLifecycleEventObject(t,r){return{promise:r}}var x={promiseCreated:generatePromiseLifecycleEventObject,promiseFulfilled:generatePromiseLifecycleEventObject,promiseRejected:generatePromiseLifecycleEventObject,promiseResolved:generatePromiseLifecycleEventObject,promiseCancelled:generatePromiseLifecycleEventObject,promiseChained:function(t,r,o){return{promise:r,child:o}},warning:function(t,r){return{warning:r}},unhandledRejection:function(t,r,o){return{reason:r,promise:o}},rejectionHandled:generatePromiseLifecycleEventObject};var activeFireEvent=function(t){var r=false;try{r=F.apply(null,arguments)}catch(t){a.throwLater(t);r=true}var o=false;try{o=A(t,x[t].apply(null,arguments))}catch(t){a.throwLater(t);o=true}return o||r};r.config=function(t){t=Object(t);"longStackTraces"in t&&(t.longStackTraces?r.longStackTraces():!t.longStackTraces&&r.hasLongStackTraces()&&disableLongStackTraces());if("warnings"in t){var o=t.warnings;D.warnings=!!o;j=D.warnings;c.isObject(o)&&"wForgottenReturn"in o&&(j=!!o.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!D.cancellation){if(a.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=cancellationClearCancellationData;r.prototype._propagateFrom=cancellationPropagateFrom;r.prototype._onCancel=cancellationOnCancel;r.prototype._setOnCancel=cancellationSetOnCancel;r.prototype._attachCancellationCallback=cancellationAttachCancellationCallback;r.prototype._execute=cancellationExecute;S=cancellationPropagateFrom;D.cancellation=true}if("monitoring"in t)if(t.monitoring&&!D.monitoring){D.monitoring=true;r.prototype._fireEvent=activeFireEvent}else if(!t.monitoring&&D.monitoring){D.monitoring=false;r.prototype._fireEvent=defaultFireEvent}if("asyncHooks"in t&&c.nodeSupportsAsyncResource){var l=D.asyncHooks;var u=!!t.asyncHooks;if(l!==u){D.asyncHooks=u;u?n():i()}}return r};function defaultFireEvent(){return false}r.prototype._fireEvent=defaultFireEvent;r.prototype._execute=function(t,r,o){try{t(r,o)}catch(t){return t}};r.prototype._onCancel=function(){};r.prototype._setOnCancel=function(t){};r.prototype._attachCancellationCallback=function(t){};r.prototype._captureStackTrace=function(){};r.prototype._attachExtraTrace=function(){};r.prototype._dereferenceTrace=function(){};r.prototype._clearCancellationData=function(){};r.prototype._propagateFrom=function(t,r){};function cancellationExecute(t,r,o){var n=this||_global;try{t(r,o,(function(t){if("function"!==typeof t)throw new TypeError("onCancel must be a function, got: "+c.toString(t));n._attachCancellationCallback(t)}))}catch(t){return t}}function cancellationAttachCancellationCallback(t){if(!this._isCancellable())return this||_global;var r=this._onCancel();void 0!==r?c.isArray(r)?r.push(t):this._setOnCancel([r,t]):this._setOnCancel(t)}function cancellationOnCancel(){return(this||_global)._onCancelField}function cancellationSetOnCancel(t){(this||_global)._onCancelField=t}function cancellationClearCancellationData(){(this||_global)._cancellationParent=void 0;(this||_global)._onCancelField=void 0}function cancellationPropagateFrom(t,r){if(0!==(1&r)){(this||_global)._cancellationParent=t;var o=t._branchesRemainingToCancel;void 0===o&&(o=0);t._branchesRemainingToCancel=o+1}0!==(2&r)&&t._isBound()&&this._setBoundTo(t._boundTo)}function bindingPropagateFrom(t,r){0!==(2&r)&&t._isBound()&&this._setBoundTo(t._boundTo)}var S=bindingPropagateFrom;function boundValueFunction(){var t=(this||_global)._boundTo;return void 0!==t&&t instanceof r?t.isFulfilled()?t.value():void 0:t}function longStackTracesCaptureStackTrace(){(this||_global)._trace=new CapturedTrace(this._peekContext())}function longStackTracesAttachExtraTrace(t,r){if(p(t)){var o=(this||_global)._trace;void 0!==o&&r&&(o=o._parent);if(void 0!==o)o.attachExtraTrace(t);else if(!t.__stackCleaned__){var n=parseStackAndMessage(t);c.notEnumerableProp(t,"stack",n.message+"\n"+n.stack.join("\n"));c.notEnumerableProp(t,"__stackCleaned__",true)}}}function longStackTracesDereferenceTrace(){(this||_global)._trace=void 0}function checkForgottenReturns(t,r,o,n,i){if(void 0===t&&null!==r&&j){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&n._bitField))return;o&&(o+=" ");var a="";var l="";if(r._trace){var c=r._trace.stack.split("\n");var u=cleanStack(c);for(var p=u.length-1;p>=0;--p){var _=u[p];if(!v.test(_)){var f=_.match(d);f&&(a="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(u.length>0){var h=u[0];for(var p=0;p<c.length;++p)if(c[p]===h){p>0&&(l="\n"+c[p-1]);break}}}var g="a promise was created in a "+o+"handler "+a+"but was not returned from it, "+"see http://goo.gl/rRqMUw"+l;n._warn(g,true,r)}}function deprecated(t,r){var o=t+" is deprecated and will be removed in a future version.";r&&(o+=" Use "+r+" instead.");return warn(o)}function warn(t,o,n){if(D.warnings){var i=new l(t);var a;if(o)n._attachExtraTrace(i);else if(D.longStackTraces&&(a=r._peekContext()))a.attachExtraTrace(i);else{var c=parseStackAndMessage(i);i.stack=c.message+"\n"+c.stack.join("\n")}activeFireEvent("warning",i)||formatAndLogError(i,"",true)}}function reconstructStack(t,r){for(var o=0;o<r.length-1;++o){r[o].push("From previous event:");r[o]=r[o].join("\n")}o<r.length&&(r[o]=r[o].join("\n"));return t+"\n"+r.join("\n")}function removeDuplicateOrEmptyJumps(t){for(var r=0;r<t.length;++r)if(0===t[r].length||r+1<t.length&&t[r][0]===t[r+1][0]){t.splice(r,1);r--}}function removeCommonRoots(t){var r=t[0];for(var o=1;o<t.length;++o){var n=t[o];var i=r.length-1;var a=r[i];var l=-1;for(var c=n.length-1;c>=0;--c)if(n[c]===a){l=c;break}for(var c=l;c>=0;--c){var u=n[c];if(r[i]!==u)break;r.pop();i--}r=n}}function cleanStack(t){var r=[];for(var o=0;o<t.length;++o){var n=t[o];var i="    (No stack trace)"===n||g.test(n);var a=i&&shouldIgnore(n);if(i&&!a){y&&" "!==n.charAt(0)&&(n="    "+n);r.push(n)}}return r}function stackFramesAsArray(t){var r=t.stack.replace(/\s+$/g,"").split("\n");for(var o=0;o<r.length;++o){var n=r[o];if("    (No stack trace)"===n||g.test(n))break}o>0&&"SyntaxError"!=t.name&&(r=r.slice(o));return r}function parseStackAndMessage(t){var r=t.stack;var o=t.toString();r="string"===typeof r&&r.length>0?stackFramesAsArray(t):["    (No stack trace)"];return{message:o,stack:"SyntaxError"==t.name?r:cleanStack(r)}}function formatAndLogError(t,r,o){if("undefined"!==typeof console){var n;if(c.isObject(t)){var i=t.stack;n=r+b(i,t)}else n=r+String(t);"function"===typeof m?m(n,o):"function"!==typeof console.log&&"object"!==typeof console.log||console.log(n)}}function fireRejectionEvent(t,r,o,n){var i=false;try{if("function"===typeof r){i=true;"rejectionHandled"===t?r(n):r(o,n)}}catch(t){a.throwLater(t)}"unhandledRejection"===t?activeFireEvent(t,o,n)||i||formatAndLogError(o,"Unhandled rejection "):activeFireEvent(t,n)}function formatNonError(t){var r;if("function"===typeof t)r="[function "+(t.name||"anonymous")+"]";else{r=t&&"function"===typeof t.toString?t.toString():c.toString(t);var o=/\[object [a-zA-Z0-9$_]+\]/;if(o.test(r))try{var n=JSON.stringify(t);r=n}catch(t){}0===r.length&&(r="(empty array)")}return"(<"+snip(r)+">, no stack trace)"}function snip(t){var r=41;return t.length<r?t:t.substr(0,r-3)+"..."}function longStackTracesIsSupported(){return"function"===typeof O}var shouldIgnore=function(){return false};var R=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function parseLineInfo(t){var r=t.match(R);if(r)return{fileName:r[1],line:parseInt(r[2],10)}}function setBounds(t,r){if(longStackTracesIsSupported()){var o=(t.stack||"").split("\n");var n=(r.stack||"").split("\n");var i=-1;var a=-1;var l;var c;for(var u=0;u<o.length;++u){var p=parseLineInfo(o[u]);if(p){l=p.fileName;i=p.line;break}}for(var u=0;u<n.length;++u){var p=parseLineInfo(n[u]);if(p){c=p.fileName;a=p.line;break}}i<0||a<0||!l||!c||l!==c||i>=a||(shouldIgnore=function(t){if(h.test(t))return true;var r=parseLineInfo(t);return!!(r&&r.fileName===l&&i<=r.line&&r.line<=a)})}}function CapturedTrace(t){(this||_global)._parent=t;(this||_global)._promisesCreated=0;var r=(this||_global)._length=1+(void 0===t?0:t._length);O(this||_global,CapturedTrace);r>32&&this.uncycle()}c.inherits(CapturedTrace,Error);o.CapturedTrace=CapturedTrace;CapturedTrace.prototype.uncycle=function(){var t=(this||_global)._length;if(!(t<2)){var r=[];var o={};for(var n=0,i=this||_global;void 0!==i;++n){r.push(i);i=i._parent}t=(this||_global)._length=n;for(var n=t-1;n>=0;--n){var a=r[n].stack;void 0===o[a]&&(o[a]=n)}for(var n=0;n<t;++n){var l=r[n].stack;var c=o[l];if(void 0!==c&&c!==n){if(c>0){r[c-1]._parent=void 0;r[c-1]._length=1}r[n]._parent=void 0;r[n]._length=1;var u=n>0?r[n-1]:this||_global;if(c<t-1){u._parent=r[c+1];u._parent.uncycle();u._length=u._parent._length+1}else{u._parent=void 0;u._length=1}var p=u._length+1;for(var _=n-2;_>=0;--_){r[_]._length=p;p++}return}}}};CapturedTrace.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();var r=parseStackAndMessage(t);var o=r.message;var n=[r.stack];var i=this||_global;while(void 0!==i){n.push(cleanStack(i.stack.split("\n")));i=i._parent}removeCommonRoots(n);removeDuplicateOrEmptyJumps(n);c.notEnumerableProp(t,"stack",reconstructStack(o,n));c.notEnumerableProp(t,"__stackCleaned__",true)}};var O=function stackDetection(){var t=/^\s*at\s*/;var v8stackFormatter=function(t,r){return"string"===typeof t?t:void 0!==r.name&&void 0!==r.message?r.toString():formatNonError(r)};if("number"===typeof Error.stackTraceLimit&&"function"===typeof Error.captureStackTrace){Error.stackTraceLimit+=6;g=t;b=v8stackFormatter;var r=Error.captureStackTrace;shouldIgnore=function(t){return h.test(t)};return function(t,o){Error.stackTraceLimit+=6;r(t,o);Error.stackTraceLimit-=6}}var o=new Error;if("string"===typeof o.stack&&o.stack.split("\n")[0].indexOf("stackDetection@")>=0){g=/@/;b=v8stackFormatter;y=true;return function captureStackTrace(t){t.stack=(new Error).stack}}var n;try{throw new Error}catch(t){n="stack"in t}if(!("stack"in o)&&n&&"number"===typeof Error.stackTraceLimit){g=t;b=v8stackFormatter;return function captureStackTrace(t){Error.stackTraceLimit+=6;try{throw new Error}catch(r){t.stack=r.stack}Error.stackTraceLimit-=6}}b=function(t,r){return"string"===typeof t?t:"object"!==typeof r&&"function"!==typeof r||void 0===r.name||void 0===r.message?formatNonError(r):r.toString()};return null}([]);if("undefined"!==typeof console&&"undefined"!==typeof console.warn){m=function(t){console.warn(t)};c.isNode&&process.stderr.isTTY?m=function(t,r){var o=r?"[33m":"[31m";console.warn(o+t+"[0m\n")}:c.isNode||"string"!==typeof(new Error).stack||(m=function(t,r){console.warn("%c"+t,r?"color: darkorange":"color: red")})}var D={warnings:C,longStackTraces:false,cancellation:false,monitoring:false,asyncHooks:false};w&&r.longStackTraces();return{asyncHooks:function(){return D.asyncHooks},longStackTraces:function(){return D.longStackTraces},warnings:function(){return D.warnings},cancellation:function(){return D.cancellation},monitoring:function(){return D.monitoring},propagateFromFunction:function(){return S},boundValueFunction:function(){return boundValueFunction},checkForgottenReturns:checkForgottenReturns,setBounds:setBounds,warn:warn,deprecated:deprecated,CapturedTrace:CapturedTrace,fireDomEvent:A,fireGlobalEvent:F}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,r,o){r.exports=function(t){function returner(){return(this||_global).value}function thrower(){throw(this||_global).reason}t.prototype["return"]=t.prototype.thenReturn=function(r){r instanceof t&&r.suppressUnhandledRejections();return this._then(returner,void 0,void 0,{value:r},void 0)};t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(thrower,void 0,void 0,{reason:t},void 0)};t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,thrower,void 0,{reason:t},void 0);var r=arguments[1];var handler=function(){throw r};return this.caught(t,handler)};t.prototype.catchReturn=function(r){if(arguments.length<=1){r instanceof t&&r.suppressUnhandledRejections();return this._then(void 0,returner,void 0,{value:r},void 0)}var o=arguments[1];o instanceof t&&o.suppressUnhandledRejections();var handler=function(){return o};return this.caught(r,handler)}}},{}],11:[function(t,r,o){r.exports=function(t,r){var o=t.reduce;var n=t.all;function promiseAllThis(){return n(this||_global)}function PromiseMapSeries(t,n){return o(t,n,r,r)}t.prototype.each=function(t){return o(this||_global,t,r,0)._then(promiseAllThis,void 0,void 0,this||_global,void 0)};t.prototype.mapSeries=function(t){return o(this||_global,t,r,r)};t.each=function(t,n){return o(t,n,r,0)._then(promiseAllThis,void 0,void 0,t,void 0)};t.mapSeries=PromiseMapSeries}},{}],12:[function(t,r,o){var n=t("./es5");var i=n.freeze;var a=t("./util");var l=a.inherits;var c=a.notEnumerableProp;function subError(t,r){function SubError(o){if(!((this||_global)instanceof SubError))return new SubError(o);c(this||_global,"message","string"===typeof o?o:r);c(this||_global,"name",t);Error.captureStackTrace?Error.captureStackTrace(this||_global,(this||_global).constructor):Error.call(this||_global)}l(SubError,Error);return SubError}var u,p;var _=subError("Warning","warning");var f=subError("CancellationError","cancellation error");var h=subError("TimeoutError","timeout error");var v=subError("AggregateError","aggregate error");try{u=TypeError;p=RangeError}catch(t){u=subError("TypeError","type error");p=subError("RangeError","range error")}var d=("join pop push shift unshift slice filter forEach some "+"every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" ");for(var g=0;g<d.length;++g)"function"===typeof Array.prototype[d[g]]&&(v.prototype[d[g]]=Array.prototype[d[g]]);n.defineProperty(v.prototype,"length",{value:0,configurable:false,writable:true,enumerable:true});v.prototype["isOperational"]=true;var b=0;v.prototype.toString=function(){var t=Array(4*b+1).join(" ");var r="\n"+t+"AggregateError of:"+"\n";b++;t=Array(4*b+1).join(" ");for(var o=0;o<(this||_global).length;++o){var n=(this||_global)[o]===(this||_global)?"[Circular AggregateError]":(this||_global)[o]+"";var i=n.split("\n");for(var a=0;a<i.length;++a)i[a]=t+i[a];n=i.join("\n");r+=n+"\n"}b--;return r};function OperationalError(t){if(!((this||_global)instanceof OperationalError))return new OperationalError(t);c(this||_global,"name","OperationalError");c(this||_global,"message",t);(this||_global).cause=t;(this||_global)["isOperational"]=true;if(t instanceof Error){c(this||_global,"message",t.message);c(this||_global,"stack",t.stack)}else Error.captureStackTrace&&Error.captureStackTrace(this||_global,(this||_global).constructor)}l(OperationalError,Error);var y=Error["__BluebirdErrorTypes__"];if(!y){y=i({CancellationError:f,TimeoutError:h,OperationalError:OperationalError,RejectionError:OperationalError,AggregateError:v});n.defineProperty(Error,"__BluebirdErrorTypes__",{value:y,writable:false,enumerable:false,configurable:false})}r.exports={Error:Error,TypeError:u,RangeError:p,CancellationError:y.CancellationError,OperationalError:y.OperationalError,TimeoutError:y.TimeoutError,AggregateError:y.AggregateError,Warning:_}},{"./es5":13,"./util":36}],13:[function(t,r,o){var n=function(){return void 0===(this||_global)}();if(n)r.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,r){var o=Object.getOwnPropertyDescriptor(t,r);return!!(!o||o.writable||o.set)}};else{var i={}.hasOwnProperty;var a={}.toString;var l={}.constructor.prototype;var ObjectKeys=function(t){var r=[];for(var o in t)i.call(t,o)&&r.push(o);return r};var ObjectGetDescriptor=function(t,r){return{value:t[r]}};var ObjectDefineProperty=function(t,r,o){t[r]=o.value;return t};var ObjectFreeze=function(t){return t};var ObjectGetPrototypeOf=function(t){try{return Object(t).constructor.prototype}catch(t){return l}};var ArrayIsArray=function(t){try{return"[object Array]"===a.call(t)}catch(t){return false}};r.exports={isArray:ArrayIsArray,keys:ObjectKeys,names:ObjectKeys,defineProperty:ObjectDefineProperty,getDescriptor:ObjectGetDescriptor,freeze:ObjectFreeze,getPrototypeOf:ObjectGetPrototypeOf,isES5:n,propertyIsWritable:function(){return true}}}},{}],14:[function(t,r,o){r.exports=function(t,r){var o=t.map;t.prototype.filter=function(t,n){return o(this||_global,t,n,r)};t.filter=function(t,n,i){return o(t,n,i,r)}}},{}],15:[function(t,r,o){r.exports=function(r,o,n){var i=t("./util");var a=r.CancellationError;var l=i.errorObj;var c=t("./catch_filter")(n);function PassThroughHandlerContext(t,r,o){(this||_global).promise=t;(this||_global).type=r;(this||_global).handler=o;(this||_global).called=false;(this||_global).cancelPromise=null}PassThroughHandlerContext.prototype.isFinallyHandler=function(){return 0===(this||_global).type};function FinallyHandlerCancelReaction(t){(this||_global).finallyHandler=t}FinallyHandlerCancelReaction.prototype._resultCancelled=function(){checkCancel((this||_global).finallyHandler)};function checkCancel(t,r){if(null!=t.cancelPromise){arguments.length>1?t.cancelPromise._reject(r):t.cancelPromise._cancel();t.cancelPromise=null;return true}return false}function succeed(){return finallyHandler.call(this||_global,(this||_global).promise._target()._settledValue())}function fail(t){if(!checkCancel(this||_global,t)){l.e=t;return l}}function finallyHandler(t){var i=(this||_global).promise;var c=(this||_global).handler;if(!(this||_global).called){(this||_global).called=true;var u=this.isFinallyHandler()?c.call(i._boundValue()):c.call(i._boundValue(),t);if(u===n)return u;if(void 0!==u){i._setReturnedNonUndefined();var p=o(u,i);if(p instanceof r){if(null!=(this||_global).cancelPromise){if(p._isCancelled()){var _=new a("late cancellation observer");i._attachExtraTrace(_);l.e=_;return l}p.isPending()&&p._attachCancellationCallback(new FinallyHandlerCancelReaction(this||_global))}return p._then(succeed,fail,void 0,this||_global,void 0)}}}if(i.isRejected()){checkCancel(this||_global);l.e=t;return l}checkCancel(this||_global);return t}r.prototype._passThrough=function(t,r,o,n){return"function"!==typeof t?this.then():this._then(o,n,void 0,new PassThroughHandlerContext(this||_global,r,t),void 0)};r.prototype.lastly=r.prototype["finally"]=function(t){return this._passThrough(t,0,finallyHandler,finallyHandler)};r.prototype.tap=function(t){return this._passThrough(t,1,finallyHandler)};r.prototype.tapCatch=function(t){var o=arguments.length;if(1===o)return this._passThrough(t,1,void 0,finallyHandler);var n=new Array(o-1),a=0,l;for(l=0;l<o-1;++l){var u=arguments[l];if(!i.isObject(u))return r.reject(new TypeError("tapCatch statement predicate: "+"expecting an object but got "+i.classString(u)));n[a++]=u}n.length=a;var p=arguments[l];return this._passThrough(c(n,p,this||_global),1,void 0,finallyHandler)};return PassThroughHandlerContext}},{"./catch_filter":7,"./util":36}],16:[function(t,r,o){r.exports=function(r,o,n,i,a,l){var c=t("./errors");var u=c.TypeError;var p=t("./util");var _=p.errorObj;var f=p.tryCatch;var h=[];function promiseFromYieldHandler(t,o,n){for(var a=0;a<o.length;++a){n._pushContext();var l=f(o[a])(t);n._popContext();if(l===_){n._pushContext();var c=r.reject(_.e);n._popContext();return c}var u=i(l,n);if(u instanceof r)return u}return null}function PromiseSpawn(t,o,i,a){if(l.cancellation()){var c=new r(n);var u=(this||_global)._finallyPromise=new r(n);(this||_global)._promise=c.lastly((function(){return u}));c._captureStackTrace();c._setOnCancel(this||_global)}else{var p=(this||_global)._promise=new r(n);p._captureStackTrace()}(this||_global)._stack=a;(this||_global)._generatorFunction=t;(this||_global)._receiver=o;(this||_global)._generator=void 0;(this||_global)._yieldHandlers="function"===typeof i?[i].concat(h):h;(this||_global)._yieldedPromise=null;(this||_global)._cancellationPhase=false}p.inherits(PromiseSpawn,a);PromiseSpawn.prototype._isResolved=function(){return null===(this||_global)._promise};PromiseSpawn.prototype._cleanup=function(){(this||_global)._promise=(this||_global)._generator=null;if(l.cancellation()&&null!==(this||_global)._finallyPromise){(this||_global)._finallyPromise._fulfill();(this||_global)._finallyPromise=null}};PromiseSpawn.prototype._promiseCancelled=function(){if(!this._isResolved()){var t="undefined"!==typeof(this||_global)._generator["return"];var o;if(t){(this||_global)._promise._pushContext();o=f((this||_global)._generator["return"]).call((this||_global)._generator,void 0);(this||_global)._promise._popContext()}else{var n=new r.CancellationError("generator .return() sentinel");r.coroutine.returnSentinel=n;(this||_global)._promise._attachExtraTrace(n);(this||_global)._promise._pushContext();o=f((this||_global)._generator["throw"]).call((this||_global)._generator,n);(this||_global)._promise._popContext()}(this||_global)._cancellationPhase=true;(this||_global)._yieldedPromise=null;this._continue(o)}};PromiseSpawn.prototype._promiseFulfilled=function(t){(this||_global)._yieldedPromise=null;(this||_global)._promise._pushContext();var r=f((this||_global)._generator.next).call((this||_global)._generator,t);(this||_global)._promise._popContext();this._continue(r)};PromiseSpawn.prototype._promiseRejected=function(t){(this||_global)._yieldedPromise=null;(this||_global)._promise._attachExtraTrace(t);(this||_global)._promise._pushContext();var r=f((this||_global)._generator["throw"]).call((this||_global)._generator,t);(this||_global)._promise._popContext();this._continue(r)};PromiseSpawn.prototype._resultCancelled=function(){if((this||_global)._yieldedPromise instanceof r){var t=(this||_global)._yieldedPromise;(this||_global)._yieldedPromise=null;t.cancel()}};PromiseSpawn.prototype.promise=function(){return(this||_global)._promise};PromiseSpawn.prototype._run=function(){(this||_global)._generator=(this||_global)._generatorFunction.call((this||_global)._receiver);(this||_global)._receiver=(this||_global)._generatorFunction=void 0;this._promiseFulfilled(void 0)};PromiseSpawn.prototype._continue=function(t){var o=(this||_global)._promise;if(t===_){this._cleanup();return(this||_global)._cancellationPhase?o.cancel():o._rejectCallback(t.e,false)}var n=t.value;if(true===t.done){this._cleanup();return(this||_global)._cancellationPhase?o.cancel():o._resolveCallback(n)}var a=i(n,(this||_global)._promise);if(!(a instanceof r)){a=promiseFromYieldHandler(a,(this||_global)._yieldHandlers,(this||_global)._promise);if(null===a){this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+(this||_global)._stack.split("\n").slice(1,-7).join("\n")));return}}a=a._target();var l=a._bitField;if(0===(50397184&l)){(this||_global)._yieldedPromise=a;a._proxy(this||_global,null)}else 0!==(33554432&l)?r._async.invoke((this||_global)._promiseFulfilled,this||_global,a._value()):0!==(16777216&l)?r._async.invoke((this||_global)._promiseRejected,this||_global,a._reason()):this._promiseCancelled()};r.coroutine=function(t,r){if("function"!==typeof t)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var o=Object(r).yieldHandler;var n=PromiseSpawn;var i=(new Error).stack;return function(){var r=t.apply(this||_global,arguments);var a=new n(void 0,void 0,o,i);var l=a.promise();a._generator=r;a._promiseFulfilled(void 0);return l}};r.coroutine.addYieldHandler=function(t){if("function"!==typeof t)throw new u("expecting a function but got "+p.classString(t));h.push(t)};r.spawn=function(t){l.deprecated("Promise.spawn()","Promise.coroutine()");if("function"!==typeof t)return o("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new PromiseSpawn(t,this||_global);var i=n.promise();n._run(r.spawn);return i}}},{"./errors":12,"./util":36}],17:[function(t,r,o){r.exports=function(r,o,n,i,a){var l=t("./util");var c=l.canEvaluate;var u=l.tryCatch;var p=l.errorObj;var _;if(!true&&c){var thenCallback=function(t){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,t))};var promiseSetter=function(t){return new Function("promise","holder","                           \n            'use strict';                                                    \n            holder.pIndex = promise;                                         \n            ".replace(/Index/g,t))};var generateHolderClass=function(t){var o=new Array(t);for(var n=0;n<o.length;++n)o[n]="this.p"+(n+1);var i=o.join(" = ")+" = null;";var l="var promise;\n"+o.map((function(t){return"                                                         \n                promise = "+t+";                                      \n                if (promise instanceof Promise) {                            \n                    promise.cancel();                                        \n                }                                                            \n            "})).join("\n");var c=o.join(", ");var _="Holder$"+t;var f="return function(tryCatch, errorObj, Promise, async) {    \n            'use strict';                                                    \n            function [TheName](fn) {                                         \n                [TheProperties]                                              \n                this.fn = fn;                                                \n                this.asyncNeeded = true;                                     \n                this.now = 0;                                                \n            }                                                                \n                                                                             \n            [TheName].prototype._callFunction = function(promise) {          \n                promise._pushContext();                                      \n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \n                promise._popContext();                                       \n                if (ret === errorObj) {                                      \n                    promise._rejectCallback(ret.e, false);                   \n                } else {                                                     \n                    promise._resolveCallback(ret);                           \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype.checkFulfillment = function(promise) {       \n                var now = ++this.now;                                        \n                if (now === [TheTotal]) {                                    \n                    if (this.asyncNeeded) {                                  \n                        async.invoke(this._callFunction, this, promise);     \n                    } else {                                                 \n                        this._callFunction(promise);                         \n                    }                                                        \n                                                                             \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype._resultCancelled = function() {              \n                [CancellationCode]                                           \n            };                                                               \n                                                                             \n            return [TheName];                                                \n        }(tryCatch, errorObj, Promise, async);                               \n        ";f=f.replace(/\[TheName\]/g,_).replace(/\[TheTotal\]/g,t).replace(/\[ThePassedArguments\]/g,c).replace(/\[TheProperties\]/g,i).replace(/\[CancellationCode\]/g,l);return new Function("tryCatch","errorObj","Promise","async",f)(u,p,r,a)};var f=[];var h=[];var v=[];for(var d=0;d<8;++d){f.push(generateHolderClass(d+1));h.push(thenCallback(d+1));v.push(promiseSetter(d+1))}_=function(t){this._reject(t)}}r.join=function(){var t=arguments.length-1;var a;if(t>0&&"function"===typeof arguments[t]){a=arguments[t];if(!true&&t<=8&&c){var u=new r(i);u._captureStackTrace();var p=f[t-1];var d=new p(a);var g=h;for(var b=0;b<t;++b){var y=n(arguments[b],u);if(y instanceof r){y=y._target();var m=y._bitField;if(0===(50397184&m)){y._then(g[b],_,void 0,u,d);v[b](y,d);d.asyncNeeded=false}else 0!==(33554432&m)?g[b].call(u,y._value(),d):0!==(16777216&m)?u._reject(y._reason()):u._cancel()}else g[b].call(u,y,d)}if(!u._isFateSealed()){if(d.asyncNeeded){var P=r._getContext();d.fn=l.contextBind(P,d.fn)}u._setAsyncGuaranteed();u._setOnCancel(d)}return u}}var C=[].slice.call(arguments);a&&C.pop();var u=new o(C).promise();return void 0!==a?u.spread(a):u}}},{"./util":36}],18:[function(t,r,o){r.exports=function(r,o,n,i,a,l){var c=t("./util");var u=c.tryCatch;var p=c.errorObj;var _=r._async;function MappingPromiseArray(t,o,n,i){this.constructor$(t);(this||_global)._promise._captureStackTrace();var l=r._getContext();(this||_global)._callback=c.contextBind(l,o);(this||_global)._preservedValues=i===a?new Array(this.length()):null;(this||_global)._limit=n;(this||_global)._inFlight=0;(this||_global)._queue=[];_.invoke((this||_global)._asyncInit,this||_global,void 0);if(c.isArray(t))for(var u=0;u<t.length;++u){var p=t[u];p instanceof r&&p.suppressUnhandledRejections()}}c.inherits(MappingPromiseArray,o);MappingPromiseArray.prototype._asyncInit=function(){this._init$(void 0,-2)};MappingPromiseArray.prototype._init=function(){};MappingPromiseArray.prototype._promiseFulfilled=function(t,o){var n=(this||_global)._values;var a=this.length();var c=(this||_global)._preservedValues;var _=(this||_global)._limit;if(o<0){o=-1*o-1;n[o]=t;if(_>=1){(this||_global)._inFlight--;this._drainQueue();if(this._isResolved())return true}}else{if(_>=1&&(this||_global)._inFlight>=_){n[o]=t;(this||_global)._queue.push(o);return false}null!==c&&(c[o]=t);var f=(this||_global)._promise;var h=(this||_global)._callback;var v=f._boundValue();f._pushContext();var d=u(h).call(v,t,o,a);var g=f._popContext();l.checkForgottenReturns(d,g,null!==c?"Promise.filter":"Promise.map",f);if(d===p){this._reject(d.e);return true}var b=i(d,(this||_global)._promise);if(b instanceof r){b=b._target();var y=b._bitField;if(0===(50397184&y)){_>=1&&(this||_global)._inFlight++;n[o]=b;b._proxy(this||_global,-1*(o+1));return false}if(0===(33554432&y)){if(0!==(16777216&y)){this._reject(b._reason());return true}this._cancel();return true}d=b._value()}n[o]=d}var m=++(this||_global)._totalResolved;if(m>=a){null!==c?this._filter(n,c):this._resolve(n);return true}return false};MappingPromiseArray.prototype._drainQueue=function(){var t=(this||_global)._queue;var r=(this||_global)._limit;var o=(this||_global)._values;while(t.length>0&&(this||_global)._inFlight<r){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(o[n],n)}};MappingPromiseArray.prototype._filter=function(t,r){var o=r.length;var n=new Array(o);var i=0;for(var a=0;a<o;++a)t[a]&&(n[i++]=r[a]);n.length=i;this._resolve(n)};MappingPromiseArray.prototype.preservedValues=function(){return(this||_global)._preservedValues};function map(t,o,i,a){if("function"!==typeof o)return n("expecting a function but got "+c.classString(o));var l=0;if(void 0!==i){if("object"!==typeof i||null===i)return r.reject(new TypeError("options argument must be an object but it is "+c.classString(i)));if("number"!==typeof i.concurrency)return r.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(i.concurrency)));l=i.concurrency}l="number"===typeof l&&isFinite(l)&&l>=1?l:0;return new MappingPromiseArray(t,o,l,a).promise()}r.prototype.map=function(t,r){return map(this||_global,t,r,null)};r.map=function(t,r,o,n){return map(t,r,o,n)}}},{"./util":36}],19:[function(t,r,o){r.exports=function(r,o,n,i,a){var l=t("./util");var c=l.tryCatch;r.method=function(t){if("function"!==typeof t)throw new r.TypeError("expecting a function but got "+l.classString(t));return function(){var n=new r(o);n._captureStackTrace();n._pushContext();var i=c(t).apply(this||_global,arguments);var l=n._popContext();a.checkForgottenReturns(i,l,"Promise.method",n);n._resolveFromSyncValue(i);return n}};r.attempt=r["try"]=function(t){if("function"!==typeof t)return i("expecting a function but got "+l.classString(t));var n=new r(o);n._captureStackTrace();n._pushContext();var u;if(arguments.length>1){a.deprecated("calling Promise.try with more than 1 argument");var p=arguments[1];var _=arguments[2];u=l.isArray(p)?c(t).apply(_,p):c(t).call(_,p)}else u=c(t)();var f=n._popContext();a.checkForgottenReturns(u,f,"Promise.try",n);n._resolveFromSyncValue(u);return n};r.prototype._resolveFromSyncValue=function(t){t===l.errorObj?this._rejectCallback(t.e,false):this._resolveCallback(t,true)}}},{"./util":36}],20:[function(t,r,o){var n=t("./util");var i=n.maybeWrapAsError;var a=t("./errors");var l=a.OperationalError;var c=t("./es5");function isUntypedError(t){return t instanceof Error&&c.getPrototypeOf(t)===Error.prototype}var u=/^(?:name|message|stack|cause)$/;function wrapAsOperationalError(t){var r;if(isUntypedError(t)){r=new l(t);r.name=t.name;r.message=t.message;r.stack=t.stack;var o=c.keys(t);for(var i=0;i<o.length;++i){var a=o[i];u.test(a)||(r[a]=t[a])}return r}n.markAsOriginatingFromRejection(t);return t}function nodebackForPromise(t,r){return function(o,n){if(null!==t){if(o){var a=wrapAsOperationalError(i(o));t._attachExtraTrace(a);t._reject(a)}else if(r){var l=[].slice.call(arguments,1);t._fulfill(l)}else t._fulfill(n);t=null}}}r.exports=nodebackForPromise},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,r,o){r.exports=function(r){var o=t("./util");var n=r._async;var i=o.tryCatch;var a=o.errorObj;function spreadAdapter(t,r){var l=this||_global;if(!o.isArray(t))return successAdapter.call(l,t,r);var c=i(r).apply(l._boundValue(),[null].concat(t));c===a&&n.throwLater(c.e)}function successAdapter(t,r){var o=this||_global;var l=o._boundValue();var c=void 0===t?i(r).call(l,null):i(r).call(l,null,t);c===a&&n.throwLater(c.e)}function errorAdapter(t,r){var o=this||_global;if(!t){var l=new Error(t+"");l.cause=t;t=l}var c=i(r).call(o._boundValue(),t);c===a&&n.throwLater(c.e)}r.prototype.asCallback=r.prototype.nodeify=function(t,r){if("function"==typeof t){var o=successAdapter;void 0!==r&&Object(r).spread&&(o=spreadAdapter);this._then(o,errorAdapter,void 0,this||_global,t)}return this||_global}}},{"./util":36}],22:[function(t,r,o){r.exports=function(){var makeSelfResolutionError=function(){return new _("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")};var reflectHandler=function(){return new Promise.PromiseInspection(this._target())};var apiRejection=function(t){return Promise.reject(new _(t))};function Proxyable(){}var o={};var n=t("./util");n.setReflectHandler(reflectHandler);var getDomain=function(){var t=process.domain;return void 0===t?null:t};var getContextDefault=function(){return null};var getContextDomain=function(){return{domain:getDomain(),async:null}};var i=n.isNode&&n.nodeSupportsAsyncResource?t("async_hooks").AsyncResource:null;var getContextAsyncHooks=function(){return{domain:getDomain(),async:new i("Bluebird::Promise")}};var a=n.isNode?getContextDomain:getContextDefault;n.notEnumerableProp(Promise,"_getContext",a);var enableAsyncHooks=function(){a=getContextAsyncHooks;n.notEnumerableProp(Promise,"_getContext",getContextAsyncHooks)};var disableAsyncHooks=function(){a=getContextDomain;n.notEnumerableProp(Promise,"_getContext",getContextDomain)};var l=t("./es5");var c=t("./async");var u=new c;l.defineProperty(Promise,"_async",{value:u});var p=t("./errors");var _=Promise.TypeError=p.TypeError;Promise.RangeError=p.RangeError;var f=Promise.CancellationError=p.CancellationError;Promise.TimeoutError=p.TimeoutError;Promise.OperationalError=p.OperationalError;Promise.RejectionError=p.OperationalError;Promise.AggregateError=p.AggregateError;var INTERNAL=function(){};var h={};var v={};var d=t("./thenables")(Promise,INTERNAL);var g=t("./promise_array")(Promise,INTERNAL,d,apiRejection,Proxyable);var b=t("./context")(Promise);var y=b.create;var m=t("./debuggability")(Promise,b,enableAsyncHooks,disableAsyncHooks);var P=m.CapturedTrace;var C=t("./finally")(Promise,d,v);var w=t("./catch_filter")(v);var j=t("./nodeback");var k=n.errorObj;var E=n.tryCatch;function check(t,r){if(null==t||t.constructor!==Promise)throw new _("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!==typeof r)throw new _("expecting a function but got "+n.classString(r))}function Promise(t){t!==INTERNAL&&check(this||_global,t);(this||_global)._bitField=0;(this||_global)._fulfillmentHandler0=void 0;(this||_global)._rejectionHandler0=void 0;(this||_global)._promise0=void 0;(this||_global)._receiver0=void 0;this._resolveFromExecutor(t);this._promiseCreated();this._fireEvent("promiseCreated",this||_global)}Promise.prototype.toString=function(){return"[object Promise]"};Promise.prototype.caught=Promise.prototype["catch"]=function(t){var r=arguments.length;if(r>1){var o=new Array(r-1),i=0,a;for(a=0;a<r-1;++a){var l=arguments[a];if(!n.isObject(l))return apiRejection("Catch statement predicate: "+"expecting an object but got "+n.classString(l));o[i++]=l}o.length=i;t=arguments[a];if("function"!==typeof t)throw new _("The last argument to .catch() "+"must be a function, got "+n.toString(t));return this.then(void 0,w(o,t,this||_global))}return this.then(void 0,t)};Promise.prototype.reflect=function(){return this._then(reflectHandler,reflectHandler,void 0,this||_global,void 0)};Promise.prototype.then=function(t,r){if(m.warnings()&&arguments.length>0&&"function"!==typeof t&&"function"!==typeof r){var o=".then() only accepts functions but was passed: "+n.classString(t);arguments.length>1&&(o+=", "+n.classString(r));this._warn(o)}return this._then(t,r,void 0,void 0,void 0)};Promise.prototype.done=function(t,r){var o=this._then(t,r,void 0,void 0,void 0);o._setIsFinal()};Promise.prototype.spread=function(t){return"function"!==typeof t?apiRejection("expecting a function but got "+n.classString(t)):this.all()._then(t,void 0,void 0,h,void 0)};Promise.prototype.toJSON=function(){var t={isFulfilled:false,isRejected:false,fulfillmentValue:void 0,rejectionReason:void 0};if(this.isFulfilled()){t.fulfillmentValue=this.value();t.isFulfilled=true}else if(this.isRejected()){t.rejectionReason=this.reason();t.isRejected=true}return t};Promise.prototype.all=function(){arguments.length>0&&this._warn(".all() was passed arguments but it does not take any");return new g(this||_global).promise()};Promise.prototype.error=function(t){return this.caught(n.originatesFromRejection,t)};Promise.getNewLibraryCopy=r.exports;Promise.is=function(t){return t instanceof Promise};Promise.fromNode=Promise.fromCallback=function(t){var r=new Promise(INTERNAL);r._captureStackTrace();var o=arguments.length>1&&!!Object(arguments[1]).multiArgs;var n=E(t)(j(r,o));n===k&&r._rejectCallback(n.e,true);r._isFateSealed()||r._setAsyncGuaranteed();return r};Promise.all=function(t){return new g(t).promise()};Promise.cast=function(t){var r=d(t);if(!(r instanceof Promise)){r=new Promise(INTERNAL);r._captureStackTrace();r._setFulfilled();r._rejectionHandler0=t}return r};Promise.resolve=Promise.fulfilled=Promise.cast;Promise.reject=Promise.rejected=function(t){var r=new Promise(INTERNAL);r._captureStackTrace();r._rejectCallback(t,true);return r};Promise.setScheduler=function(t){if("function"!==typeof t)throw new _("expecting a function but got "+n.classString(t));return u.setScheduler(t)};Promise.prototype._then=function(t,r,o,i,l){var c=void 0!==l;var p=c?l:new Promise(INTERNAL);var _=this._target();var h=_._bitField;if(!c){p._propagateFrom(this||_global,3);p._captureStackTrace();void 0===i&&0!==(2097152&(this||_global)._bitField)&&(i=0===(50397184&h)?_===(this||_global)?void 0:(this||_global)._boundTo:this._boundValue());this._fireEvent("promiseChained",this||_global,p)}var v=a();if(0===(50397184&h))_._addCallbacks(t,r,p,i,v);else{var d,g,b=_._settlePromiseCtx;if(0!==(33554432&h)){g=_._rejectionHandler0;d=t}else if(0!==(16777216&h)){g=_._fulfillmentHandler0;d=r;_._unsetRejectionIsUnhandled()}else{b=_._settlePromiseLateCancellationObserver;g=new f("late cancellation observer");_._attachExtraTrace(g);d=r}u.invoke(b,_,{handler:n.contextBind(v,d),promise:p,receiver:i,value:g})}return p};Promise.prototype._length=function(){return 65535&(this||_global)._bitField};Promise.prototype._isFateSealed=function(){return 0!==(117506048&(this||_global)._bitField)};Promise.prototype._isFollowing=function(){return 67108864===(67108864&(this||_global)._bitField)};Promise.prototype._setLength=function(t){(this||_global)._bitField=-65536&(this||_global)._bitField|65535&t};Promise.prototype._setFulfilled=function(){(this||_global)._bitField=33554432|(this||_global)._bitField;this._fireEvent("promiseFulfilled",this||_global)};Promise.prototype._setRejected=function(){(this||_global)._bitField=16777216|(this||_global)._bitField;this._fireEvent("promiseRejected",this||_global)};Promise.prototype._setFollowing=function(){(this||_global)._bitField=67108864|(this||_global)._bitField;this._fireEvent("promiseResolved",this||_global)};Promise.prototype._setIsFinal=function(){(this||_global)._bitField=4194304|(this||_global)._bitField};Promise.prototype._isFinal=function(){return(4194304&(this||_global)._bitField)>0};Promise.prototype._unsetCancelled=function(){(this||_global)._bitField=~65536&(this||_global)._bitField};Promise.prototype._setCancelled=function(){(this||_global)._bitField=65536|(this||_global)._bitField;this._fireEvent("promiseCancelled",this||_global)};Promise.prototype._setWillBeCancelled=function(){(this||_global)._bitField=8388608|(this||_global)._bitField};Promise.prototype._setAsyncGuaranteed=function(){if(!u.hasCustomScheduler()){var t=(this||_global)._bitField;(this||_global)._bitField=t|(536870912&t)>>2^134217728}};Promise.prototype._setNoAsyncGuarantee=function(){(this||_global)._bitField=~134217728&(536870912|(this||_global)._bitField)};Promise.prototype._receiverAt=function(t){var r=0===t?(this||_global)._receiver0:(this||_global)[4*t-4+3];if(r!==o)return void 0===r&&this._isBound()?this._boundValue():r};Promise.prototype._promiseAt=function(t){return(this||_global)[4*t-4+2]};Promise.prototype._fulfillmentHandlerAt=function(t){return(this||_global)[4*t-4+0]};Promise.prototype._rejectionHandlerAt=function(t){return(this||_global)[4*t-4+1]};Promise.prototype._boundValue=function(){};Promise.prototype._migrateCallback0=function(t){var r=t._bitField;var n=t._fulfillmentHandler0;var i=t._rejectionHandler0;var a=t._promise0;var l=t._receiverAt(0);void 0===l&&(l=o);this._addCallbacks(n,i,a,l,null)};Promise.prototype._migrateCallbackAt=function(t,r){var n=t._fulfillmentHandlerAt(r);var i=t._rejectionHandlerAt(r);var a=t._promiseAt(r);var l=t._receiverAt(r);void 0===l&&(l=o);this._addCallbacks(n,i,a,l,null)};Promise.prototype._addCallbacks=function(t,r,o,i,a){var l=this._length();if(l>=65535-4){l=0;this._setLength(0)}if(0===l){(this||_global)._promise0=o;(this||_global)._receiver0=i;"function"===typeof t&&((this||_global)._fulfillmentHandler0=n.contextBind(a,t));"function"===typeof r&&((this||_global)._rejectionHandler0=n.contextBind(a,r))}else{var c=4*l-4;(this||_global)[c+2]=o;(this||_global)[c+3]=i;"function"===typeof t&&((this||_global)[c+0]=n.contextBind(a,t));"function"===typeof r&&((this||_global)[c+1]=n.contextBind(a,r))}this._setLength(l+1);return l};Promise.prototype._proxy=function(t,r){this._addCallbacks(void 0,void 0,r,t,null)};Promise.prototype._resolveCallback=function(t,r){if(0===(117506048&(this||_global)._bitField)){if(t===(this||_global))return this._rejectCallback(makeSelfResolutionError(),false);var o=d(t,this||_global);if(!(o instanceof Promise))return this._fulfill(t);r&&this._propagateFrom(o,2);var n=o._target();if(n!==(this||_global)){var i=n._bitField;if(0===(50397184&i)){var a=this._length();a>0&&n._migrateCallback0(this||_global);for(var l=1;l<a;++l)n._migrateCallbackAt(this||_global,l);this._setFollowing();this._setLength(0);this._setFollowee(o)}else if(0!==(33554432&i))this._fulfill(n._value());else if(0!==(16777216&i))this._reject(n._reason());else{var c=new f("late cancellation observer");n._attachExtraTrace(c);this._reject(c)}}else this._reject(makeSelfResolutionError())}};Promise.prototype._rejectCallback=function(t,r,o){var i=n.ensureErrorObject(t);var a=i===t;if(!a&&!o&&m.warnings()){var l="a promise was rejected with a non-error: "+n.classString(t);this._warn(l,true)}this._attachExtraTrace(i,!!r&&a);this._reject(t)};Promise.prototype._resolveFromExecutor=function(t){if(t!==INTERNAL){var r=this||_global;this._captureStackTrace();this._pushContext();var o=true;var n=this._execute(t,(function(t){r._resolveCallback(t)}),(function(t){r._rejectCallback(t,o)}));o=false;this._popContext();void 0!==n&&r._rejectCallback(n,true)}};Promise.prototype._settlePromiseFromHandler=function(t,r,o,i){var a=i._bitField;if(0===(65536&a)){i._pushContext();var l;if(r===h)if(o&&"number"===typeof o.length)l=E(t).apply(this._boundValue(),o);else{l=k;l.e=new _("cannot .spread() a non-array: "+n.classString(o))}else l=E(t).call(r,o);var c=i._popContext();a=i._bitField;if(0===(65536&a))if(l===v)i._reject(o);else if(l===k)i._rejectCallback(l.e,false);else{m.checkForgottenReturns(l,c,"",i,this||_global);i._resolveCallback(l)}}};Promise.prototype._target=function(){var t=this||_global;while(t._isFollowing())t=t._followee();return t};Promise.prototype._followee=function(){return(this||_global)._rejectionHandler0};Promise.prototype._setFollowee=function(t){(this||_global)._rejectionHandler0=t};Promise.prototype._settlePromise=function(t,r,o,n){var i=t instanceof Promise;var a=(this||_global)._bitField;var l=0!==(134217728&a);if(0!==(65536&a)){i&&t._invokeInternalOnCancel();if(o instanceof C&&o.isFinallyHandler()){o.cancelPromise=t;E(r).call(o,n)===k&&t._reject(k.e)}else r===reflectHandler?t._fulfill(reflectHandler.call(o)):o instanceof Proxyable?o._promiseCancelled(t):i||t instanceof g?t._cancel():o.cancel()}else if("function"===typeof r)if(i){l&&t._setAsyncGuaranteed();this._settlePromiseFromHandler(r,o,n,t)}else r.call(o,n,t);else if(o instanceof Proxyable)o._isResolved()||(0!==(33554432&a)?o._promiseFulfilled(n,t):o._promiseRejected(n,t));else if(i){l&&t._setAsyncGuaranteed();0!==(33554432&a)?t._fulfill(n):t._reject(n)}};Promise.prototype._settlePromiseLateCancellationObserver=function(t){var r=t.handler;var o=t.promise;var n=t.receiver;var i=t.value;"function"===typeof r?o instanceof Promise?this._settlePromiseFromHandler(r,n,i,o):r.call(n,i,o):o instanceof Promise&&o._reject(i)};Promise.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)};Promise.prototype._settlePromise0=function(t,r,o){var n=(this||_global)._promise0;var i=this._receiverAt(0);(this||_global)._promise0=void 0;(this||_global)._receiver0=void 0;this._settlePromise(n,t,i,r)};Promise.prototype._clearCallbackDataAtIndex=function(t){var r=4*t-4;(this||_global)[r+2]=(this||_global)[r+3]=(this||_global)[r+0]=(this||_global)[r+1]=void 0};Promise.prototype._fulfill=function(t){var r=(this||_global)._bitField;if(!((117506048&r)>>>16)){if(t===(this||_global)){var o=makeSelfResolutionError();this._attachExtraTrace(o);return this._reject(o)}this._setFulfilled();(this||_global)._rejectionHandler0=t;if((65535&r)>0){0!==(134217728&r)?this._settlePromises():u.settlePromises(this||_global);this._dereferenceTrace()}}};Promise.prototype._reject=function(t){var r=(this||_global)._bitField;if(!((117506048&r)>>>16)){this._setRejected();(this||_global)._fulfillmentHandler0=t;if(this._isFinal())return u.fatalError(t,n.isNode);(65535&r)>0?u.settlePromises(this||_global):this._ensurePossibleRejectionHandled()}};Promise.prototype._fulfillPromises=function(t,r){for(var o=1;o<t;o++){var n=this._fulfillmentHandlerAt(o);var i=this._promiseAt(o);var a=this._receiverAt(o);this._clearCallbackDataAtIndex(o);this._settlePromise(i,n,a,r)}};Promise.prototype._rejectPromises=function(t,r){for(var o=1;o<t;o++){var n=this._rejectionHandlerAt(o);var i=this._promiseAt(o);var a=this._receiverAt(o);this._clearCallbackDataAtIndex(o);this._settlePromise(i,n,a,r)}};Promise.prototype._settlePromises=function(){var t=(this||_global)._bitField;var r=65535&t;if(r>0){if(0!==(16842752&t)){var o=(this||_global)._fulfillmentHandler0;this._settlePromise0((this||_global)._rejectionHandler0,o,t);this._rejectPromises(r,o)}else{var n=(this||_global)._rejectionHandler0;this._settlePromise0((this||_global)._fulfillmentHandler0,n,t);this._fulfillPromises(r,n)}this._setLength(0)}this._clearCancellationData()};Promise.prototype._settledValue=function(){var t=(this||_global)._bitField;return 0!==(33554432&t)?(this||_global)._rejectionHandler0:0!==(16777216&t)?(this||_global)._fulfillmentHandler0:void 0};"undefined"!==typeof Symbol&&Symbol.toStringTag&&l.defineProperty(Promise.prototype,Symbol.toStringTag,{get:function(){return"Object"}});function deferResolve(t){(this||_global).promise._resolveCallback(t)}function deferReject(t){(this||_global).promise._rejectCallback(t,false)}Promise.defer=Promise.pending=function(){m.deprecated("Promise.defer","new Promise");var t=new Promise(INTERNAL);return{promise:t,resolve:deferResolve,reject:deferReject}};n.notEnumerableProp(Promise,"_makeSelfResolutionError",makeSelfResolutionError);t("./method")(Promise,INTERNAL,d,apiRejection,m);t("./bind")(Promise,INTERNAL,d,m);t("./cancel")(Promise,g,apiRejection,m);t("./direct_resolve")(Promise);t("./synchronous_inspection")(Promise);t("./join")(Promise,g,d,INTERNAL,u);Promise.Promise=Promise;Promise.version="3.7.2";t("./call_get.js")(Promise);t("./generators.js")(Promise,apiRejection,INTERNAL,d,Proxyable,m);t("./map.js")(Promise,g,apiRejection,d,INTERNAL,m);t("./nodeify.js")(Promise);t("./promisify.js")(Promise,INTERNAL);t("./props.js")(Promise,g,d,apiRejection);t("./race.js")(Promise,INTERNAL,d,apiRejection);t("./reduce.js")(Promise,g,apiRejection,d,INTERNAL,m);t("./settle.js")(Promise,g,m);t("./some.js")(Promise,g,apiRejection);t("./timers.js")(Promise,INTERNAL,m);t("./using.js")(Promise,apiRejection,d,y,INTERNAL,m);t("./any.js")(Promise);t("./each.js")(Promise,INTERNAL);t("./filter.js")(Promise,INTERNAL);n.toFastProperties(Promise);n.toFastProperties(Promise.prototype);function fillTypes(t){var r=new Promise(INTERNAL);r._fulfillmentHandler0=t;r._rejectionHandler0=t;r._promise0=t;r._receiver0=t}fillTypes({a:1});fillTypes({b:2});fillTypes({c:3});fillTypes(1);fillTypes((function(){}));fillTypes(void 0);fillTypes(false);fillTypes(new Promise(INTERNAL));m.setBounds(c.firstLineError,n.lastLineError);return Promise}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(t,r,o){r.exports=function(r,o,n,i,a){var l=t("./util");var c=l.isArray;function toResolutionValue(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}function PromiseArray(t){var n=(this||_global)._promise=new r(o);if(t instanceof r){n._propagateFrom(t,3);t.suppressUnhandledRejections()}n._setOnCancel(this||_global);(this||_global)._values=t;(this||_global)._length=0;(this||_global)._totalResolved=0;this._init(void 0,-2)}l.inherits(PromiseArray,a);PromiseArray.prototype.length=function(){return(this||_global)._length};PromiseArray.prototype.promise=function(){return(this||_global)._promise};PromiseArray.prototype._init=function init(t,o){var a=n((this||_global)._values,(this||_global)._promise);if(a instanceof r){a=a._target();var c=a._bitField;(this||_global)._values=a;if(0===(50397184&c)){(this||_global)._promise._setAsyncGuaranteed();return a._then(init,(this||_global)._reject,void 0,this||_global,o)}if(0===(33554432&c))return 0!==(16777216&c)?this._reject(a._reason()):this._cancel();a=a._value()}a=l.asArray(a);if(null!==a)0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(toResolutionValue(o));else{var u=i("expecting an array or an iterable object but got "+l.classString(a)).reason();(this||_global)._promise._rejectCallback(u,false)}};PromiseArray.prototype._iterate=function(t){var o=this.getActualLength(t.length);(this||_global)._length=o;(this||_global)._values=this.shouldCopyValues()?new Array(o):(this||_global)._values;var i=(this||_global)._promise;var a=false;var l=null;for(var c=0;c<o;++c){var u=n(t[c],i);if(u instanceof r){u=u._target();l=u._bitField}else l=null;if(a)null!==l&&u.suppressUnhandledRejections();else if(null!==l)if(0===(50397184&l)){u._proxy(this||_global,c);(this||_global)._values[c]=u}else a=0!==(33554432&l)?this._promiseFulfilled(u._value(),c):0!==(16777216&l)?this._promiseRejected(u._reason(),c):this._promiseCancelled(c);else a=this._promiseFulfilled(u,c)}a||i._setAsyncGuaranteed()};PromiseArray.prototype._isResolved=function(){return null===(this||_global)._values};PromiseArray.prototype._resolve=function(t){(this||_global)._values=null;(this||_global)._promise._fulfill(t)};PromiseArray.prototype._cancel=function(){if(!this._isResolved()&&(this||_global)._promise._isCancellable()){(this||_global)._values=null;(this||_global)._promise._cancel()}};PromiseArray.prototype._reject=function(t){(this||_global)._values=null;(this||_global)._promise._rejectCallback(t,false)};PromiseArray.prototype._promiseFulfilled=function(t,r){(this||_global)._values[r]=t;var o=++(this||_global)._totalResolved;if(o>=(this||_global)._length){this._resolve((this||_global)._values);return true}return false};PromiseArray.prototype._promiseCancelled=function(){this._cancel();return true};PromiseArray.prototype._promiseRejected=function(t){(this||_global)._totalResolved++;this._reject(t);return true};PromiseArray.prototype._resultCancelled=function(){if(!this._isResolved()){var t=(this||_global)._values;this._cancel();if(t instanceof r)t.cancel();else for(var o=0;o<t.length;++o)t[o]instanceof r&&t[o].cancel()}};PromiseArray.prototype.shouldCopyValues=function(){return true};PromiseArray.prototype.getActualLength=function(t){return t};return PromiseArray}},{"./util":36}],24:[function(t,r,o){r.exports=function(r,o){var n={};var i=t("./util");var a=t("./nodeback");var l=i.withAppended;var c=i.maybeWrapAsError;var u=i.canEvaluate;var p=t("./errors").TypeError;var _="Async";var f={__isPromisified__:true};var h=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"];var v=new RegExp("^(?:"+h.join("|")+")$");var defaultFilter=function(t){return i.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function propsFilter(t){return!v.test(t)}function isPromisified(t){try{return true===t.__isPromisified__}catch(t){return false}}function hasPromisified(t,r,o){var n=i.getDataPropertyOrDefault(t,r+o,f);return!!n&&isPromisified(n)}function checkValid(t,r,o){for(var n=0;n<t.length;n+=2){var i=t[n];if(o.test(i)){var a=i.replace(o,"");for(var l=0;l<t.length;l+=2)if(t[l]===a)throw new p("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",r))}}}function promisifiableMethods(t,r,o,n){var a=i.inheritedDataKeys(t);var l=[];for(var c=0;c<a.length;++c){var u=a[c];var p=t[u];var _=n===defaultFilter||defaultFilter(u,p,t);"function"!==typeof p||isPromisified(p)||hasPromisified(t,u,r)||!n(u,p,t,_)||l.push(u,p)}checkValid(l,r,o);return l}var escapeIdentRegex=function(t){return t.replace(/([$])/,"\\$")};var d;if(!true){var switchCaseArgumentOrder=function(t){var r=[t];var o=Math.max(0,t-1-3);for(var n=t-1;n>=o;--n)r.push(n);for(var n=t+1;n<=3;++n)r.push(n);return r};var argumentSequence=function(t){return i.filledRange(t,"_arg","")};var parameterDeclaration=function(t){return i.filledRange(Math.max(t,3),"_arg","")};var parameterCount=function(t){return"number"===typeof t.length?Math.max(Math.min(t.length,1023+1),0):0};d=function(t,u,p,_,f,h){var v=Math.max(0,parameterCount(_)-1);var d=switchCaseArgumentOrder(v);var g="string"===typeof t||u===n;function generateCallForArgumentCount(t){var r=argumentSequence(t).join(", ");var o=t>0?", ":"";var n;n=g?"ret = callback.call(this, {{args}}, nodeback); break;\n":void 0===u?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n";return n.replace("{{args}}",r).replace(", ",o)}function generateArgumentSwitchCase(){var t="";for(var r=0;r<d.length;++r)t+="case "+d[r]+":"+generateCallForArgumentCount(d[r]);t+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",g?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n");return t}var b="string"===typeof t?"this != null ? this['"+t+"'] : fn":"fn";var y="'use strict';                                                \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise, "+h+");   \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n            return promise;                                                  \n        };                                                                   \n        notEnumerableProp(ret, '__isPromisified__', true);                   \n        return ret;                                                          \n    ".replace("[CodeForSwitchCase]",generateArgumentSwitchCase()).replace("[GetFunctionCode]",b);y=y.replace("Parameters",parameterDeclaration(v));return new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",y)(r,_,u,l,c,a,i.tryCatch,i.errorObj,i.notEnumerableProp,o)}}function makeNodePromisifiedClosure(t,u,p,_,f,h){var v=function(){return this||_global}();var d=t;"string"===typeof d&&(t=_);function promisified(){var i=u;u===n&&(i=this||_global);var p=new r(o);p._captureStackTrace();var _="string"===typeof d&&(this||_global)!==v?(this||_global)[d]:t;var f=a(p,h);try{_.apply(i,l(arguments,f))}catch(t){p._rejectCallback(c(t),true,true)}p._isFateSealed()||p._setAsyncGuaranteed();return p}i.notEnumerableProp(promisified,"__isPromisified__",true);return promisified}var g=u?d:makeNodePromisifiedClosure;function promisifyAll(t,r,o,a,l){var c=new RegExp(escapeIdentRegex(r)+"$");var u=promisifiableMethods(t,r,c,o);for(var p=0,_=u.length;p<_;p+=2){var f=u[p];var h=u[p+1];var v=f+r;if(a===g)t[v]=g(f,n,f,h,r,l);else{var d=a(h,(function(){return g(f,n,f,h,r,l)}));i.notEnumerableProp(d,"__isPromisified__",true);t[v]=d}}i.toFastProperties(t);return t}function promisify(t,r,o){return g(t,r,void 0,t,null,o)}r.promisify=function(t,r){if("function"!==typeof t)throw new p("expecting a function but got "+i.classString(t));if(isPromisified(t))return t;r=Object(r);var o=void 0===r.context?n:r.context;var a=!!r.multiArgs;var l=promisify(t,o,a);i.copyDescriptors(t,l,propsFilter);return l};r.promisifyAll=function(t,r){if("function"!==typeof t&&"object"!==typeof t)throw new p("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");r=Object(r);var o=!!r.multiArgs;var n=r.suffix;"string"!==typeof n&&(n=_);var a=r.filter;"function"!==typeof a&&(a=defaultFilter);var l=r.promisifier;"function"!==typeof l&&(l=g);if(!i.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");var c=i.inheritedDataKeys(t);for(var u=0;u<c.length;++u){var f=t[c[u]];if("constructor"!==c[u]&&i.isClass(f)){promisifyAll(f.prototype,n,a,l,o);promisifyAll(f,n,a,l,o)}}return promisifyAll(t,n,a,l,o)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,r,o){r.exports=function(r,o,n,i){var a=t("./util");var l=a.isObject;var c=t("./es5");var u;"function"===typeof Map&&(u=Map);var p=function(){var t=0;var r=0;function extractEntry(o,n){(this||_global)[t]=o;(this||_global)[t+r]=n;t++}return function mapToEntries(o){r=o.size;t=0;var n=new Array(2*o.size);o.forEach(extractEntry,n);return n}}();var entriesToMap=function(t){var r=new u;var o=t.length/2|0;for(var n=0;n<o;++n){var i=t[o+n];var a=t[n];r.set(i,a)}return r};function PropertiesPromiseArray(t){var r=false;var o;if(void 0!==u&&t instanceof u){o=p(t);r=true}else{var n=c.keys(t);var i=n.length;o=new Array(2*i);for(var a=0;a<i;++a){var l=n[a];o[a]=t[l];o[a+i]=l}}this.constructor$(o);(this||_global)._isMap=r;this._init$(void 0,r?-6:-3)}a.inherits(PropertiesPromiseArray,o);PropertiesPromiseArray.prototype._init=function(){};PropertiesPromiseArray.prototype._promiseFulfilled=function(t,r){(this||_global)._values[r]=t;var o=++(this||_global)._totalResolved;if(o>=(this||_global)._length){var n;if((this||_global)._isMap)n=entriesToMap((this||_global)._values);else{n={};var i=this.length();for(var a=0,l=this.length();a<l;++a)n[(this||_global)._values[a+i]]=(this||_global)._values[a]}this._resolve(n);return true}return false};PropertiesPromiseArray.prototype.shouldCopyValues=function(){return false};PropertiesPromiseArray.prototype.getActualLength=function(t){return t>>1};function props(t){var o;var a=n(t);if(!l(a))return i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n");o=a instanceof r?a._then(r.props,void 0,void 0,void 0,void 0):new PropertiesPromiseArray(a).promise();a instanceof r&&o._propagateFrom(a,2);return o}r.prototype.props=function(){return props(this||_global)};r.props=function(t){return props(t)}}},{"./es5":13,"./util":36}],26:[function(t,r,o){function arrayMove(t,r,o,n,i){for(var a=0;a<i;++a){o[a+n]=t[a+r];t[a+r]=void 0}}function Queue(t){(this||_global)._capacity=t;(this||_global)._length=0;(this||_global)._front=0}Queue.prototype._willBeOverCapacity=function(t){return(this||_global)._capacity<t};Queue.prototype._pushOne=function(t){var r=this.length();this._checkCapacity(r+1);var o=(this||_global)._front+r&(this||_global)._capacity-1;(this||_global)[o]=t;(this||_global)._length=r+1};Queue.prototype.push=function(t,r,o){var n=this.length()+3;if(this._willBeOverCapacity(n)){this._pushOne(t);this._pushOne(r);this._pushOne(o)}else{var i=(this||_global)._front+n-3;this._checkCapacity(n);var a=(this||_global)._capacity-1;(this||_global)[i+0&a]=t;(this||_global)[i+1&a]=r;(this||_global)[i+2&a]=o;(this||_global)._length=n}};Queue.prototype.shift=function(){var t=(this||_global)._front,r=(this||_global)[t];(this||_global)[t]=void 0;(this||_global)._front=t+1&(this||_global)._capacity-1;(this||_global)._length--;return r};Queue.prototype.length=function(){return(this||_global)._length};Queue.prototype._checkCapacity=function(t){(this||_global)._capacity<t&&this._resizeTo((this||_global)._capacity<<1)};Queue.prototype._resizeTo=function(t){var r=(this||_global)._capacity;(this||_global)._capacity=t;var o=(this||_global)._front;var n=(this||_global)._length;var i=o+n&r-1;arrayMove(this||_global,0,this||_global,r,i)};r.exports=Queue},{}],27:[function(t,r,o){r.exports=function(r,o,n,i){var a=t("./util");var raceLater=function(t){return t.then((function(r){return race(r,t)}))};function race(t,l){var c=n(t);if(c instanceof r)return raceLater(c);t=a.asArray(t);if(null===t)return i("expecting an array or an iterable object but got "+a.classString(t));var u=new r(o);void 0!==l&&u._propagateFrom(l,3);var p=u._fulfill;var _=u._reject;for(var f=0,h=t.length;f<h;++f){var v=t[f];(void 0!==v||f in t)&&r.cast(v)._then(p,_,void 0,u,null)}return u}r.race=function(t){return race(t,void 0)};r.prototype.race=function(){return race(this||_global,void 0)}}},{"./util":36}],28:[function(t,r,o){r.exports=function(r,o,n,i,a,l){var c=t("./util");var u=c.tryCatch;function ReductionPromiseArray(t,o,n,i){this.constructor$(t);var l=r._getContext();(this||_global)._fn=c.contextBind(l,o);if(void 0!==n){n=r.resolve(n);n._attachCancellationCallback(this||_global)}(this||_global)._initialValue=n;(this||_global)._currentCancellable=null;(this||_global)._eachValues=i===a?Array((this||_global)._length):0===i?null:void 0;(this||_global)._promise._captureStackTrace();this._init$(void 0,-5)}c.inherits(ReductionPromiseArray,o);ReductionPromiseArray.prototype._gotAccum=function(t){void 0!==(this||_global)._eachValues&&null!==(this||_global)._eachValues&&t!==a&&(this||_global)._eachValues.push(t)};ReductionPromiseArray.prototype._eachComplete=function(t){null!==(this||_global)._eachValues&&(this||_global)._eachValues.push(t);return(this||_global)._eachValues};ReductionPromiseArray.prototype._init=function(){};ReductionPromiseArray.prototype._resolveEmptyArray=function(){this._resolve(void 0!==(this||_global)._eachValues?(this||_global)._eachValues:(this||_global)._initialValue)};ReductionPromiseArray.prototype.shouldCopyValues=function(){return false};ReductionPromiseArray.prototype._resolve=function(t){(this||_global)._promise._resolveCallback(t);(this||_global)._values=null};ReductionPromiseArray.prototype._resultCancelled=function(t){if(t===(this||_global)._initialValue)return this._cancel();if(!this._isResolved()){this._resultCancelled$();(this||_global)._currentCancellable instanceof r&&(this||_global)._currentCancellable.cancel();(this||_global)._initialValue instanceof r&&(this||_global)._initialValue.cancel()}};ReductionPromiseArray.prototype._iterate=function(t){(this||_global)._values=t;var o;var n;var i=t.length;if(void 0!==(this||_global)._initialValue){o=(this||_global)._initialValue;n=0}else{o=r.resolve(t[0]);n=1}(this||_global)._currentCancellable=o;for(var a=n;a<i;++a){var l=t[a];l instanceof r&&l.suppressUnhandledRejections()}if(!o.isRejected())for(;n<i;++n){var c={accum:null,value:t[n],index:n,length:i,array:this||_global};o=o._then(gotAccum,void 0,void 0,c,void 0);0===(127&n)&&o._setNoAsyncGuarantee()}void 0!==(this||_global)._eachValues&&(o=o._then((this||_global)._eachComplete,void 0,void 0,this||_global,void 0));o._then(completed,completed,void 0,o,this||_global)};r.prototype.reduce=function(t,r){return reduce(this||_global,t,r,null)};r.reduce=function(t,r,o,n){return reduce(t,r,o,n)};function completed(t,r){this.isFulfilled()?r._resolve(t):r._reject(t)}function reduce(t,r,o,i){if("function"!==typeof r)return n("expecting a function but got "+c.classString(r));var a=new ReductionPromiseArray(t,r,o,i);return a.promise()}function gotAccum(t){(this||_global).accum=t;(this||_global).array._gotAccum(t);var o=i((this||_global).value,(this||_global).array._promise);if(o instanceof r){(this||_global).array._currentCancellable=o;return o._then(gotValue,void 0,void 0,this||_global,void 0)}return gotValue.call(this||_global,o)}function gotValue(t){var o=(this||_global).array;var n=o._promise;var i=u(o._fn);n._pushContext();var a;a=void 0!==o._eachValues?i.call(n._boundValue(),t,(this||_global).index,(this||_global).length):i.call(n._boundValue(),(this||_global).accum,t,(this||_global).index,(this||_global).length);a instanceof r&&(o._currentCancellable=a);var c=n._popContext();l.checkForgottenReturns(a,c,void 0!==o._eachValues?"Promise.each":"Promise.reduce",n);return a}}},{"./util":36}],29:[function(t,r,o){var n=t("./util");var i;var noAsyncScheduler=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};var a=n.getNativePromise();if(n.isNode&&"undefined"===typeof MutationObserver){var l=_global.setImmediate;var c=process.nextTick;i=n.isRecentNode?function(t){l.call(_global,t)}:function(t){c.call(process,t)}}else if("function"===typeof a&&"function"===typeof a.resolve){var u=a.resolve();i=function(t){u.then(t)}}else i="undefined"===typeof MutationObserver||"undefined"!==typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?"undefined"!==typeof process.nextTick?function(t){process.nextTick(t)}:"undefined"!==typeof setTimeout?function(t){setTimeout(t,0)}:noAsyncScheduler:function(){var t=document.createElement("div");var r={attributes:true};var o=false;var n=document.createElement("div");var i=new MutationObserver((function(){t.classList.toggle("foo");o=false}));i.observe(n,r);var scheduleToggle=function(){if(!o){o=true;n.classList.toggle("foo")}};return function schedule(o){var n=new MutationObserver((function(){n.disconnect();o()}));n.observe(t,r);scheduleToggle()}}();r.exports=i},{"./util":36}],30:[function(t,r,o){r.exports=function(r,o,n){var i=r.PromiseInspection;var a=t("./util");function SettledPromiseArray(t){this.constructor$(t)}a.inherits(SettledPromiseArray,o);SettledPromiseArray.prototype._promiseResolved=function(t,r){(this||_global)._values[t]=r;var o=++(this||_global)._totalResolved;if(o>=(this||_global)._length){this._resolve((this||_global)._values);return true}return false};SettledPromiseArray.prototype._promiseFulfilled=function(t,r){var o=new i;o._bitField=33554432;o._settledValueField=t;return this._promiseResolved(r,o)};SettledPromiseArray.prototype._promiseRejected=function(t,r){var o=new i;o._bitField=16777216;o._settledValueField=t;return this._promiseResolved(r,o)};r.settle=function(t){n.deprecated(".settle()",".reflect()");return new SettledPromiseArray(t).promise()};r.allSettled=function(t){return new SettledPromiseArray(t).promise()};r.prototype.settle=function(){return r.settle(this||_global)}}},{"./util":36}],31:[function(t,r,o){r.exports=function(r,o,n){var i=t("./util");var a=t("./errors").RangeError;var l=t("./errors").AggregateError;var c=i.isArray;var u={};function SomePromiseArray(t){this.constructor$(t);(this||_global)._howMany=0;(this||_global)._unwrap=false;(this||_global)._initialized=false}i.inherits(SomePromiseArray,o);SomePromiseArray.prototype._init=function(){if((this||_global)._initialized)if(0!==(this||_global)._howMany){this._init$(void 0,-5);var t=c((this||_global)._values);!this._isResolved()&&t&&(this||_global)._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])};SomePromiseArray.prototype.init=function(){(this||_global)._initialized=true;this._init()};SomePromiseArray.prototype.setUnwrap=function(){(this||_global)._unwrap=true};SomePromiseArray.prototype.howMany=function(){return(this||_global)._howMany};SomePromiseArray.prototype.setHowMany=function(t){(this||_global)._howMany=t};SomePromiseArray.prototype._promiseFulfilled=function(t){this._addFulfilled(t);if(this._fulfilled()===this.howMany()){(this||_global)._values.length=this.howMany();1===this.howMany()&&(this||_global)._unwrap?this._resolve((this||_global)._values[0]):this._resolve((this||_global)._values);return true}return false};SomePromiseArray.prototype._promiseRejected=function(t){this._addRejected(t);return this._checkOutcome()};SomePromiseArray.prototype._promiseCancelled=function(){if((this||_global)._values instanceof r||null==(this||_global)._values)return this._cancel();this._addRejected(u);return this._checkOutcome()};SomePromiseArray.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){var t=new l;for(var r=this.length();r<(this||_global)._values.length;++r)(this||_global)._values[r]!==u&&t.push((this||_global)._values[r]);t.length>0?this._reject(t):this._cancel();return true}return false};SomePromiseArray.prototype._fulfilled=function(){return(this||_global)._totalResolved};SomePromiseArray.prototype._rejected=function(){return(this||_global)._values.length-this.length()};SomePromiseArray.prototype._addRejected=function(t){(this||_global)._values.push(t)};SomePromiseArray.prototype._addFulfilled=function(t){(this||_global)._values[(this||_global)._totalResolved++]=t};SomePromiseArray.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()};SomePromiseArray.prototype._getRangeError=function(t){var r="Input array must contain at least "+(this||_global)._howMany+" items but contains only "+t+" items";return new a(r)};SomePromiseArray.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function some(t,r){if((0|r)!==r||r<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var o=new SomePromiseArray(t);var i=o.promise();o.setHowMany(r);o.init();return i}r.some=function(t,r){return some(t,r)};r.prototype.some=function(t){return some(this||_global,t)};r._SomePromiseArray=SomePromiseArray}},{"./errors":12,"./util":36}],32:[function(t,r,o){r.exports=function(t){function PromiseInspection(t){if(void 0!==t){t=t._target();(this||_global)._bitField=t._bitField;(this||_global)._settledValueField=t._isFateSealed()?t._settledValue():void 0}else{(this||_global)._bitField=0;(this||_global)._settledValueField=void 0}}PromiseInspection.prototype._settledValue=function(){return(this||_global)._settledValueField};var r=PromiseInspection.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()};var o=PromiseInspection.prototype.error=PromiseInspection.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()};var n=PromiseInspection.prototype.isFulfilled=function(){return 0!==(33554432&(this||_global)._bitField)};var i=PromiseInspection.prototype.isRejected=function(){return 0!==(16777216&(this||_global)._bitField)};var a=PromiseInspection.prototype.isPending=function(){return 0===(50397184&(this||_global)._bitField)};var l=PromiseInspection.prototype.isResolved=function(){return 0!==(50331648&(this||_global)._bitField)};PromiseInspection.prototype.isCancelled=function(){return 0!==(8454144&(this||_global)._bitField)};t.prototype.__isCancelled=function(){return 65536===(65536&(this||_global)._bitField)};t.prototype._isCancelled=function(){return this._target().__isCancelled()};t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)};t.prototype.isPending=function(){return a.call(this._target())};t.prototype.isRejected=function(){return i.call(this._target())};t.prototype.isFulfilled=function(){return n.call(this._target())};t.prototype.isResolved=function(){return l.call(this._target())};t.prototype.value=function(){return r.call(this._target())};t.prototype.reason=function(){var t=this._target();t._unsetRejectionIsUnhandled();return o.call(t)};t.prototype._value=function(){return this._settledValue()};t.prototype._reason=function(){this._unsetRejectionIsUnhandled();return this._settledValue()};t.PromiseInspection=PromiseInspection}},{}],33:[function(t,r,o){r.exports=function(r,o){var n=t("./util");var i=n.errorObj;var a=n.isObject;function tryConvertToPromise(t,n){if(a(t)){if(t instanceof r)return t;var l=getThen(t);if(l===i){n&&n._pushContext();var c=r.reject(l.e);n&&n._popContext();return c}if("function"===typeof l){if(isAnyBluebirdPromise(t)){var c=new r(o);t._then(c._fulfill,c._reject,void 0,c,null);return c}return doThenable(t,l,n)}}return t}function doGetThen(t){return t.then}function getThen(t){try{return doGetThen(t)}catch(t){i.e=t;return i}}var l={}.hasOwnProperty;function isAnyBluebirdPromise(t){try{return l.call(t,"_promise0")}catch(t){return false}}function doThenable(t,a,l){var c=new r(o);var u=c;l&&l._pushContext();c._captureStackTrace();l&&l._popContext();var p=true;var _=n.tryCatch(a).call(t,resolve,reject);p=false;if(c&&_===i){c._rejectCallback(_.e,true,true);c=null}function resolve(t){if(c){c._resolveCallback(t);c=null}}function reject(t){if(c){c._rejectCallback(t,p,true);c=null}}return u}return tryConvertToPromise}},{"./util":36}],34:[function(t,r,o){r.exports=function(r,o,n){var i=t("./util");var a=r.TimeoutError;function HandleWrapper(t){(this||_global).handle=t}HandleWrapper.prototype._resultCancelled=function(){clearTimeout((this||_global).handle)};var afterValue=function(t){return l(+(this||_global)).thenReturn(t)};var l=r.delay=function(t,i){var a;var l;if(void 0!==i){a=r.resolve(i)._then(afterValue,null,null,t,void 0);n.cancellation()&&i instanceof r&&a._setOnCancel(i)}else{a=new r(o);l=setTimeout((function(){a._fulfill()}),+t);n.cancellation()&&a._setOnCancel(new HandleWrapper(l));a._captureStackTrace()}a._setAsyncGuaranteed();return a};r.prototype.delay=function(t){return l(t,this||_global)};var afterTimeout=function(t,r,o){var n;n="string"!==typeof r?r instanceof Error?r:new a("operation timed out"):new a(r);i.markAsOriginatingFromRejection(n);t._attachExtraTrace(n);t._reject(n);null!=o&&o.cancel()};function successClear(t){clearTimeout((this||_global).handle);return t}function failureClear(t){clearTimeout((this||_global).handle);throw t}r.prototype.timeout=function(t,r){t=+t;var o,i;var a=new HandleWrapper(setTimeout((function timeoutTimeout(){o.isPending()&&afterTimeout(o,r,i)}),t));if(n.cancellation()){i=this.then();o=i._then(successClear,failureClear,void 0,a,void 0);o._setOnCancel(a)}else o=this._then(successClear,failureClear,void 0,a,void 0);return o}}},{"./util":36}],35:[function(t,r,o){r.exports=function(r,o,n,i,a,l){var c=t("./util");var u=t("./errors").TypeError;var p=t("./util").inherits;var _=c.errorObj;var f=c.tryCatch;var h={};function thrower(t){setTimeout((function(){throw t}),0)}function castPreservingDisposable(t){var r=n(t);r!==t&&"function"===typeof t._isDisposable&&"function"===typeof t._getDisposer&&t._isDisposable()&&r._setDisposable(t._getDisposer());return r}function dispose(t,o){var i=0;var l=t.length;var c=new r(a);function iterator(){if(i>=l)return c._fulfill();var a=castPreservingDisposable(t[i++]);if(a instanceof r&&a._isDisposable()){try{a=n(a._getDisposer().tryDispose(o),t.promise)}catch(t){return thrower(t)}if(a instanceof r)return a._then(iterator,thrower,null,null,null)}iterator()}iterator();return c}function Disposer(t,r,o){(this||_global)._data=t;(this||_global)._promise=r;(this||_global)._context=o}Disposer.prototype.data=function(){return(this||_global)._data};Disposer.prototype.promise=function(){return(this||_global)._promise};Disposer.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():h};Disposer.prototype.tryDispose=function(t){var r=this.resource();var o=(this||_global)._context;void 0!==o&&o._pushContext();var n=r!==h?this.doDispose(r,t):null;void 0!==o&&o._popContext();(this||_global)._promise._unsetDisposable();(this||_global)._data=null;return n};Disposer.isDisposer=function(t){return null!=t&&"function"===typeof t.resource&&"function"===typeof t.tryDispose};function FunctionDisposer(t,r,o){this.constructor$(t,r,o)}p(FunctionDisposer,Disposer);FunctionDisposer.prototype.doDispose=function(t,r){var o=this.data();return o.call(t,t,r)};function maybeUnwrapDisposer(t){if(Disposer.isDisposer(t)){(this||_global).resources[(this||_global).index]._setDisposable(t);return t.promise()}return t}function ResourceList(t){(this||_global).length=t;(this||_global).promise=null;(this||_global)[t-1]=null}ResourceList.prototype._resultCancelled=function(){var t=(this||_global).length;for(var o=0;o<t;++o){var n=(this||_global)[o];n instanceof r&&n.cancel()}};r.using=function(){var t=arguments.length;if(t<2)return o("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!==typeof i)return o("expecting a function but got "+c.classString(i));var a;var u=true;if(2===t&&Array.isArray(arguments[0])){a=arguments[0];t=a.length;u=false}else{a=arguments;t--}var p=new ResourceList(t);for(var h=0;h<t;++h){var v=a[h];if(Disposer.isDisposer(v)){var d=v;v=v.promise();v._setDisposable(d)}else{var g=n(v);g instanceof r&&(v=g._then(maybeUnwrapDisposer,null,null,{resources:p,index:h},void 0))}p[h]=v}var b=new Array(p.length);for(var h=0;h<b.length;++h)b[h]=r.resolve(p[h]).reflect();var y=r.all(b).then((function(t){for(var r=0;r<t.length;++r){var o=t[r];if(o.isRejected()){_.e=o.error();return _}if(!o.isFulfilled()){y.cancel();return}t[r]=o.value()}m._pushContext();i=f(i);var n=u?i.apply(void 0,t):i(t);var a=m._popContext();l.checkForgottenReturns(n,a,"Promise.using",m);return n}));var m=y.lastly((function(){var t=new r.PromiseInspection(y);return dispose(p,t)}));p.promise=m;m._setOnCancel(p);return m};r.prototype._setDisposable=function(t){(this||_global)._bitField=131072|(this||_global)._bitField;(this||_global)._disposer=t};r.prototype._isDisposable=function(){return(131072&(this||_global)._bitField)>0};r.prototype._getDisposer=function(){return(this||_global)._disposer};r.prototype._unsetDisposable=function(){(this||_global)._bitField=~131072&(this||_global)._bitField;(this||_global)._disposer=void 0};r.prototype.disposer=function(t){if("function"===typeof t)return new FunctionDisposer(t,this||_global,i());throw new u}}},{"./errors":12,"./util":36}],36:[function(_dereq_,module,exports){var es5=_dereq_("./es5");var canEvaluate="undefined"==typeof navigator;var errorObj={e:{}};var tryCatchTarget;var globalObject="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof _global?_global:void 0!==(this||_global)?this||_global:null;function tryCatcher(){try{var t=tryCatchTarget;tryCatchTarget=null;return t.apply(this||_global,arguments)}catch(t){errorObj.e=t;return errorObj}}function tryCatch(t){tryCatchTarget=t;return tryCatcher}var inherits=function(t,r){var o={}.hasOwnProperty;function T(){(this||_global).constructor=t;(this||_global).constructor$=r;for(var n in r.prototype)o.call(r.prototype,n)&&"$"!==n.charAt(n.length-1)&&((this||_global)[n+"$"]=r.prototype[n])}T.prototype=r.prototype;t.prototype=new T;return t.prototype};function isPrimitive(t){return null==t||true===t||false===t||"string"===typeof t||"number"===typeof t}function isObject(t){return"function"===typeof t||"object"===typeof t&&null!==t}function maybeWrapAsError(t){return isPrimitive(t)?new Error(safeToString(t)):t}function withAppended(t,r){var o=t.length;var n=new Array(o+1);var i;for(i=0;i<o;++i)n[i]=t[i];n[i]=r;return n}function getDataPropertyOrDefault(t,r,o){if(!es5.isES5)return{}.hasOwnProperty.call(t,r)?t[r]:void 0;var n=Object.getOwnPropertyDescriptor(t,r);return null!=n?null==n.get&&null==n.set?n.value:o:void 0}function notEnumerableProp(t,r,o){if(isPrimitive(t))return t;var n={value:o,configurable:true,enumerable:false,writable:true};es5.defineProperty(t,r,n);return t}function thrower(t){throw t}var inheritedDataKeys=function(){var t=[Array.prototype,Object.prototype,Function.prototype];var isExcludedProto=function(r){for(var o=0;o<t.length;++o)if(t[o]===r)return true;return false};if(es5.isES5){var r=Object.getOwnPropertyNames;return function(t){var o=[];var n=Object.create(null);while(null!=t&&!isExcludedProto(t)){var i;try{i=r(t)}catch(t){return o}for(var a=0;a<i.length;++a){var l=i[a];if(!n[l]){n[l]=true;var c=Object.getOwnPropertyDescriptor(t,l);null!=c&&null==c.get&&null==c.set&&o.push(l)}}t=es5.getPrototypeOf(t)}return o}}var o={}.hasOwnProperty;return function(r){if(isExcludedProto(r))return[];var n=[];e:for(var i in r)if(o.call(r,i))n.push(i);else{for(var a=0;a<t.length;++a)if(o.call(t[a],i))continue e;n.push(i)}return n}}();var thisAssignmentPattern=/this\s*\.\s*\S+\s*=/;function isClass(t){try{if("function"===typeof t){var r=es5.names(t.prototype);var o=es5.isES5&&r.length>1;var n=r.length>0&&!(1===r.length&&"constructor"===r[0]);var i=thisAssignmentPattern.test(t+"")&&es5.names(t).length>0;if(o||n||i)return true}return false}catch(t){return false}}function toFastProperties(obj){function FakeConstructor(){}FakeConstructor.prototype=obj;var receiver=new FakeConstructor;function ic(){return typeof receiver.foo}ic();ic();return obj;eval(obj)}var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(t){return rident.test(t)}function filledRange(t,r,o){var n=new Array(t);for(var i=0;i<t;++i)n[i]=r+i+o;return n}function safeToString(t){try{return t+""}catch(t){return"[no string representation]"}}function isError(t){return t instanceof Error||null!==t&&"object"===typeof t&&"string"===typeof t.message&&"string"===typeof t.name}function markAsOriginatingFromRejection(t){try{notEnumerableProp(t,"isOperational",true)}catch(t){}}function originatesFromRejection(t){return null!=t&&(t instanceof Error["__BluebirdErrorTypes__"].OperationalError||true===t["isOperational"])}function canAttachTrace(t){return isError(t)&&es5.propertyIsWritable(t,"stack")}var ensureErrorObject=function(){return"stack"in new Error?function(t){return canAttachTrace(t)?t:new Error(safeToString(t))}:function(t){if(canAttachTrace(t))return t;try{throw new Error(safeToString(t))}catch(t){return t}}}();function classString(t){return{}.toString.call(t)}function copyDescriptors(t,r,o){var n=es5.names(t);for(var i=0;i<n.length;++i){var a=n[i];if(o(a))try{es5.defineProperty(r,a,es5.getDescriptor(t,a))}catch(t){}}}var asArray=function(t){return es5.isArray(t)?t:null};if("undefined"!==typeof Symbol&&Symbol.iterator){var ArrayFrom="function"===typeof Array.from?function(t){return Array.from(t)}:function(t){var r=[];var o=t[Symbol.iterator]();var n;while(!(n=o.next()).done)r.push(n.value);return r};asArray=function(t){return es5.isArray(t)?t:null!=t&&"function"===typeof t[Symbol.iterator]?ArrayFrom(t):null}}var isNode="undefined"!==typeof process&&"[object process]"===classString(process).toLowerCase();var hasEnvVariables="undefined"!==typeof process&&"undefined"!==typeof process.env;function env(t){return hasEnvVariables?process.env[t]:void 0}function getNativePromise(){if("function"===typeof Promise)try{var t=new Promise((function(){}));if("[object Promise]"===classString(t))return Promise}catch(t){}}var reflectHandler;function contextBind(t,r){if(null===t||"function"!==typeof r||r===reflectHandler)return r;null!==t.domain&&(r=t.domain.bind(r));var o=t.async;if(null!==o){var n=r;r=function(){var t=new Array(2).concat([].slice.call(arguments));t[0]=n;t[1]=this||_global;return o.runInAsyncScope.apply(o,t)}}return r}var ret={setReflectHandler:function(t){reflectHandler=t},isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,asArray:asArray,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,isError:isError,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,isNode:isNode,hasEnvVariables:hasEnvVariables,env:env,global:globalObject,getNativePromise:getNativePromise,contextBind:contextBind};ret.isRecentNode=ret.isNode&&function(){var t;process.versions&&process.versions.node?t=process.versions.node.split(".").map(Number):process.version&&(t=process.version.split(".").map(Number));return 0===t[0]&&t[1]>10||t[0]>0}();ret.nodeSupportsAsyncResource=ret.isNode&&function(){var t=false;try{var r=_dereq_("async_hooks").AsyncResource;t="function"===typeof r.prototype.runInAsyncScope}catch(r){t=false}return t}();ret.isNode&&ret.toFastProperties(process);try{throw new Error}catch(t){ret.lastLineError=t}module.exports=ret},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}));"undefined"!==typeof window&&null!==window?window.P=window.Promise:"undefined"!==typeof self&&null!==self&&(self.P=self.Promise);var exports$1=exports;const firstLineError=exports.firstLineError,CancellationError=exports.CancellationError,freeze=exports.freeze,isArray=exports.isArray,keys=exports.keys,names=exports.names,defineProperty=exports.defineProperty,getDescriptor=exports.getDescriptor,getPrototypeOf=exports.getPrototypeOf,isES5=exports.isES5,propertyIsWritable=exports.propertyIsWritable;const _Error=exports.Error,_TypeError2=exports.TypeError,_RangeError2=exports.RangeError;export default exports$1;export{CancellationError,_Error as Error,_RangeError2 as RangeError,_TypeError2 as TypeError,defineProperty,firstLineError,freeze,getDescriptor,getPrototypeOf,isArray,isES5,keys,names,propertyIsWritable};

