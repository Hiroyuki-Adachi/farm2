import{p as t}from"../../_/0545670c.js";import{o as e}from"../../_/3fe460d2.js";import{T as n}from"../../_/633ae550.js";import{e as s}from"../../_/c5b352d6.js";import"../../_/e0803811.js";var a={},o=t,h={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}};function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}a.parse=O,a.resolve=function(t,e){return O(t,!1,!0).resolve(e)},a.resolveObject=function(t,e){return t?O(t,!1,!0).resolveObject(e):e},a.format=function(t){h.isString(t)&&(t=O(t));return t instanceof r?t.format():r.prototype.format.call(t)},a.Url=r;var i=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(f),p=["%","/","?",";","#"].concat(u),m=["/","?","#"],v=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},U=e;function O(t,e,n){if(t&&h.isObject(t)&&t instanceof r)return t;var s=new r;return s.parse(t,e,n),s}r.prototype.parse=function(t,e,n){if(!h.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),a=-1!==s&&s<t.indexOf("#")?"?":"#",l=t.split(a);l[0]=l[0].replace(/\\/g,"/");var f=t=l.join(a);if(f=f.trim(),!n&&1===t.split("#").length){var y=c.exec(f);if(y)return this.path=f,this.href=f,this.pathname=y[1],y[2]?(this.search=y[2],this.query=e?U.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var R=i.exec(f);if(R){var A=(R=R[0]).toLowerCase();this.protocol=A,f=f.substr(R.length)}if(n||R||f.match(/^\/\/[^@\/]+@[^@\/]+/)){var L="//"===f.substr(0,2);!L||R&&b[R]||(f=f.substr(2),this.slashes=!0)}if(!b[R]&&(L||R&&!w[R])){for(var P,C,j=-1,x=0;x<m.length;x++)-1!==(D=f.indexOf(m[x]))&&(-1===j||D<j)&&(j=D);-1!==(C=-1===j?f.lastIndexOf("@"):f.lastIndexOf("@",j))&&(P=f.slice(0,C),f=f.slice(C+1),this.auth=decodeURIComponent(P)),j=-1;for(x=0;x<p.length;x++){var D;-1!==(D=f.indexOf(p[x]))&&(-1===j||D<j)&&(j=D)}-1===j&&(j=f.length),this.host=f.slice(0,j),f=f.slice(j),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var q=this.hostname.split(/\./),T=(x=0,q.length);x<T;x++){var k=q[x];if(k&&!k.match(v)){for(var $="",F=0,_=k.length;F<_;F++)k.charCodeAt(F)>127?$+="x":$+=k[F];if(!$.match(v)){var z=q.slice(0,x),S=q.slice(x+1),N=k.match(d);N&&(z.push(N[1]),S.unshift(N[2])),S.length&&(f="/"+S.join(".")+f),this.hostname=z.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=o.toASCII(this.hostname));var E=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+E,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==f[0]&&(f="/"+f))}if(!g[A])for(x=0,T=u.length;x<T;x++){var H=u[x];if(-1!==f.indexOf(H)){var Z=encodeURIComponent(H);Z===H&&(Z=escape(H)),f=f.split(H).join(Z)}}var J=f.indexOf("#");-1!==J&&(this.hash=f.substr(J),f=f.slice(0,J));var B=f.indexOf("?");if(-1!==B?(this.search=f.substr(B),this.query=f.substr(B+1),e&&(this.query=U.parse(this.query)),f=f.slice(0,B)):e&&(this.search="",this.query={}),f&&(this.pathname=f),w[A]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){E=this.pathname||"";var G=this.search||"";this.path=E+G}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",s=this.hash||"",a=!1,o="";this.host?a=t+this.host:this.hostname&&(a=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(o=U.stringify(this.query));var i=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||w[e])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),s&&"#"!==s.charAt(0)&&(s="#"+s),i&&"?"!==i.charAt(0)&&(i="?"+i),e+a+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(i=i.replace("#","%23"))+s},r.prototype.resolve=function(t){return this.resolveObject(O(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(h.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,s=Object.keys(this),a=0;a<s.length;a++){var o=s[a];n[o]=this[o]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var i=Object.keys(t),l=0;l<i.length;l++){var c=i[l];"protocol"!==c&&(n[c]=t[c])}return w[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!w[t.protocol]){for(var f=Object.keys(t),u=0;u<f.length;u++){var p=f[u];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||b[t.protocol])n.pathname=t.pathname;else{for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),n.pathname=m.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var v=n.pathname||"",d=n.search||"";n.path=v+d}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),U=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=U||g||n.host&&t.pathname,R=y,A=n.pathname&&n.pathname.split("/")||[],L=(m=t.pathname&&t.pathname.split("/")||[],n.protocol&&!w[n.protocol]);if(L&&(n.hostname="",n.port=null,n.host&&(""===A[0]?A[0]=n.host:A.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===m[0]?m[0]=t.host:m.unshift(t.host)),t.host=null),y=y&&(""===m[0]||""===A[0])),U)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,A=m;else if(m.length)A||(A=[]),A.pop(),A=A.concat(m),n.search=t.search,n.query=t.query;else if(!h.isNullOrUndefined(t.search)){L&&(n.hostname=n.host=A.shift(),(D=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=D.shift(),n.host=n.hostname=D.shift()));return n.search=t.search,n.query=t.query,h.isNull(n.pathname)&&h.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!A.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var P=A.slice(-1)[0],C=(n.host||t.host||A.length>1)&&("."===P||".."===P)||""===P,j=0,x=A.length;x>=0;x--)"."===(P=A[x])?A.splice(x,1):".."===P?(A.splice(x,1),j++):j&&(A.splice(x,1),j--);if(!y&&!R)for(;j--;j)A.unshift("..");!y||""===A[0]||A[0]&&"/"===A[0].charAt(0)||A.unshift(""),C&&"/"!==A.join("/").substr(-1)&&A.push("");var D,I=""===A[0]||A[0]&&"/"===A[0].charAt(0);L&&(n.hostname=n.host=I?"":A.length?A.shift():"",(D=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=D.shift(),n.host=n.hostname=D.shift()));return(y=y||n.host&&A.length)&&!I&&A.unshift(""),A.length?n.pathname=A.join("/"):(n.pathname=null,n.path=null),h.isNull(n.pathname)&&h.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=l.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};a.Url;a.format;a.resolve;a.resolveObject;var y={},R=false;function dew(){if(R)return y;R=true;var t=n;function assertPath(t){if("string"!==typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function normalizeStringPosix(t,e){var n="";var s=0;var a=-1;var o=0;var h;for(var i=0;i<=t.length;++i){if(i<t.length)h=t.charCodeAt(i);else{if(47===h)break;h=47}if(47===h){if(a===i-1||1===o);else if(a!==i-1&&2===o){if(n.length<2||2!==s||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){if(-1===l){n="";s=0}else{n=n.slice(0,l);s=n.length-1-n.lastIndexOf("/")}a=i;o=0;continue}}else if(2===n.length||1===n.length){n="";s=0;a=i;o=0;continue}if(e){n.length>0?n+="/..":n="..";s=2}}else{n.length>0?n+="/"+t.slice(a+1,i):n=t.slice(a+1,i);s=i-a-1}a=i;o=0}else 46===h&&-1!==o?++o:o=-1}return n}function _format(t,e){var n=e.dir||e.root;var s=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+s:n+t+s:s}var e={resolve:function resolve(){var e="";var n=false;var s;for(var a=arguments.length-1;a>=-1&&!n;a--){var o;if(a>=0)o=arguments[a];else{void 0===s&&(s=t.cwd());o=s}assertPath(o);if(0!==o.length){e=o+"/"+e;n=47===o.charCodeAt(0)}}e=normalizeStringPosix(e,!n);return n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function normalize(t){assertPath(t);if(0===t.length)return".";var e=47===t.charCodeAt(0);var n=47===t.charCodeAt(t.length-1);t=normalizeStringPosix(t,!e);0!==t.length||e||(t=".");t.length>0&&n&&(t+="/");return e?"/"+t:t},isAbsolute:function isAbsolute(t){assertPath(t);return t.length>0&&47===t.charCodeAt(0)},join:function join(){if(0===arguments.length)return".";var t;for(var n=0;n<arguments.length;++n){var s=arguments[n];assertPath(s);s.length>0&&(void 0===t?t=s:t+="/"+s)}return void 0===t?".":e.normalize(t)},relative:function relative(t,n){assertPath(t);assertPath(n);if(t===n)return"";t=e.resolve(t);n=e.resolve(n);if(t===n)return"";var s=1;for(;s<t.length;++s)if(47!==t.charCodeAt(s))break;var a=t.length;var o=a-s;var h=1;for(;h<n.length;++h)if(47!==n.charCodeAt(h))break;var i=n.length;var l=i-h;var c=o<l?o:l;var f=-1;var u=0;for(;u<=c;++u){if(u===c){if(l>c){if(47===n.charCodeAt(h+u))return n.slice(h+u+1);if(0===u)return n.slice(h+u)}else o>c&&(47===t.charCodeAt(s+u)?f=u:0===u&&(f=0));break}var p=t.charCodeAt(s+u);var m=n.charCodeAt(h+u);if(p!==m)break;47===p&&(f=u)}var v="";for(u=s+f+1;u<=a;++u)u!==a&&47!==t.charCodeAt(u)||(0===v.length?v+="..":v+="/..");if(v.length>0)return v+n.slice(h+f);h+=f;47===n.charCodeAt(h)&&++h;return n.slice(h)},_makeLong:function _makeLong(t){return t},dirname:function dirname(t){assertPath(t);if(0===t.length)return".";var e=t.charCodeAt(0);var n=47===e;var s=-1;var a=true;for(var o=t.length-1;o>=1;--o){e=t.charCodeAt(o);if(47===e){if(!a){s=o;break}}else a=false}return-1===s?n?"/":".":n&&1===s?"//":t.slice(0,s)},basename:function basename(t,e){if(void 0!==e&&"string"!==typeof e)throw new TypeError('"ext" argument must be a string');assertPath(t);var n=0;var s=-1;var a=true;var o;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var h=e.length-1;var i=-1;for(o=t.length-1;o>=0;--o){var l=t.charCodeAt(o);if(47===l){if(!a){n=o+1;break}}else{if(-1===i){a=false;i=o+1}if(h>=0)if(l===e.charCodeAt(h))-1===--h&&(s=o);else{h=-1;s=i}}}n===s?s=i:-1===s&&(s=t.length);return t.slice(n,s)}for(o=t.length-1;o>=0;--o)if(47===t.charCodeAt(o)){if(!a){n=o+1;break}}else if(-1===s){a=false;s=o+1}return-1===s?"":t.slice(n,s)},extname:function extname(t){assertPath(t);var e=-1;var n=0;var s=-1;var a=true;var o=0;for(var h=t.length-1;h>=0;--h){var i=t.charCodeAt(h);if(47!==i){if(-1===s){a=false;s=h+1}46===i?-1===e?e=h:1!==o&&(o=1):-1!==e&&(o=-1)}else if(!a){n=h+1;break}}return-1===e||-1===s||0===o||1===o&&e===s-1&&e===n+1?"":t.slice(e,s)},format:function format(t){if(null===t||"object"!==typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return _format("/",t)},parse:function parse(t){assertPath(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;var n=t.charCodeAt(0);var s=47===n;var a;if(s){e.root="/";a=1}else a=0;var o=-1;var h=0;var i=-1;var l=true;var c=t.length-1;var f=0;for(;c>=a;--c){n=t.charCodeAt(c);if(47!==n){if(-1===i){l=false;i=c+1}46===n?-1===o?o=c:1!==f&&(f=1):-1!==o&&(f=-1)}else if(!l){h=c+1;break}}if(-1===o||-1===i||0===f||1===f&&o===i-1&&o===h+1)-1!==i&&(e.base=e.name=0===h&&s?t.slice(1,i):t.slice(h,i));else{if(0===h&&s){e.name=t.slice(1,o);e.base=t.slice(1,i)}else{e.name=t.slice(h,o);e.base=t.slice(h,i)}e.ext=t.slice(o,i)}h>0?e.dir=t.slice(0,h-1):s&&(e.dir="/");return e},sep:"/",delimiter:":",win32:null,posix:null};e.posix=e;y=e;return y}var A=dew();const L="undefined"!==typeof Deno?"windows"===Deno.build.os?"win32":Deno.build.os:void 0;a.URL="undefined"!==typeof URL?URL:null;a.pathToFileURL=pathToFileURL$1;a.fileURLToPath=fileURLToPath$1;a.Url;a.format;a.resolve;a.resolveObject;a.URL;const P=92;const C=47;const j=97;const x=122;const D="win32"===L;const I=/\//g;const q=/%/g;const T=/\\/g;const k=/\n/g;const $=/\r/g;const F=/\t/g;
/**
 * Get fully resolved platform-specific file path from the given URL string/ object
 * @param path The file URL string or URL object to convert to a path
 */function fileURLToPath$1(t){if("string"===typeof t)t=new URL(t);else if(!(t instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if("file:"!==t.protocol)throw new Deno.errors.InvalidData("invalid url scheme");return D?getPathFromURLWin$1(t):getPathFromURLPosix$1(t)}function getPathFromURLWin$1(t){const e=t.hostname;let n=t.pathname;for(let t=0;t<n.length;t++)if("%"===n[t]){const e=n.codePointAt(t+2)||32;if("2"===n[t+1]&&102===e||"5"===n[t+1]&&99===e)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}n=n.replace(I,"\\");n=decodeURIComponent(n);if(""!==e)return`\\\\${e}${n}`;{const t=32|n.codePointAt(1);const e=n[2];if(t<j||t>x||":"!==e)throw new Deno.errors.InvalidData("file url path must be absolute");return n.slice(1)}}function getPathFromURLPosix$1(t){if(""!==t.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");const e=t.pathname;for(let t=0;t<e.length;t++)if("%"===e[t]){const n=e.codePointAt(t+2)||32;if("2"===e[t+1]&&102===n)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function pathToFileURL$1(t){let e=A.resolve(t);const n=t.charCodeAt(t.length-1);(n===C||D&&n===P)&&e[e.length-1]!==A.sep&&(e+="/");const s=new URL("file://");e.includes("%")&&(e=e.replace(q,"%25"));!D&&e.includes("\\")&&(e=e.replace(T,"%5C"));e.includes("\n")&&(e=e.replace(k,"%0A"));e.includes("\r")&&(e=e.replace($,"%0D"));e.includes("\t")&&(e=e.replace(F,"%09"));s.pathname=e;return s}const _="undefined"!==typeof Deno?"windows"===Deno.build.os?"win32":Deno.build.os:void 0;a.URL="undefined"!==typeof URL?URL:null;a.pathToFileURL=pathToFileURL;a.fileURLToPath=fileURLToPath;var z=a.Url;var S=a.format;var N=a.resolve;var E=a.resolveObject;var W=a.parse;const H=a.URL;const Z=92;const J=47;const B=97;const G=122;const K="win32"===_;const M=/\//g;const Q=/%/g;const V=/\\/g;const X=/\n/g;const Y=/\r/g;const tt=/\t/g;
/**
 * Get fully resolved platform-specific file path from the given URL string/ object
 * @param path The file URL string or URL object to convert to a path
 */function fileURLToPath(t){if("string"===typeof t)t=new URL(t);else if(!(t instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if("file:"!==t.protocol)throw new Deno.errors.InvalidData("invalid url scheme");return K?getPathFromURLWin(t):getPathFromURLPosix(t)}function getPathFromURLWin(t){const e=t.hostname;let n=t.pathname;for(let t=0;t<n.length;t++)if("%"===n[t]){const e=n.codePointAt(t+2)||32;if("2"===n[t+1]&&102===e||"5"===n[t+1]&&99===e)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}n=n.replace(M,"\\");n=decodeURIComponent(n);if(""!==e)return`\\\\${e}${n}`;{const t=32|n.codePointAt(1);const e=n[2];if(t<B||t>G||":"!==e)throw new Deno.errors.InvalidData("file url path must be absolute");return n.slice(1)}}function getPathFromURLPosix(t){if(""!==t.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");const e=t.pathname;for(let t=0;t<e.length;t++)if("%"===e[t]){const n=e.codePointAt(t+2)||32;if("2"===e[t+1]&&102===n)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function pathToFileURL(t){let e=s.resolve(t);const n=t.charCodeAt(t.length-1);(n===J||K&&n===Z)&&e[e.length-1]!==s.sep&&(e+="/");const a=new URL("file://");e.includes("%")&&(e=e.replace(Q,"%25"));!K&&e.includes("\\")&&(e=e.replace(V,"%5C"));e.includes("\n")&&(e=e.replace(X,"%0A"));e.includes("\r")&&(e=e.replace(Y,"%0D"));e.includes("\t")&&(e=e.replace(tt,"%09"));a.pathname=e;return a}export{H as URL,z as Url,a as default,fileURLToPath,S as format,W as parse,pathToFileURL,N as resolve,E as resolveObject};

