var m="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var b={};var y;b,y=function(){function e(m,b){var y=Object.keys(m);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(m);b&&(I=I.filter((function(b){return Object.getOwnPropertyDescriptor(m,b).enumerable}))),y.push.apply(y,I)}return y}function t(m){for(var b=1;b<arguments.length;b++){var y=null!=arguments[b]?arguments[b]:{};b%2?e(Object(y),!0).forEach((function(b){r(m,b,y[b])})):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(y)):e(Object(y)).forEach((function(b){Object.defineProperty(m,b,Object.getOwnPropertyDescriptor(y,b))}))}return m}function n(m){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},n(m)}function r(m,b,y){return b in m?Object.defineProperty(m,b,{value:y,enumerable:!0,configurable:!0,writable:!0}):m[b]=y,m}function i(m){return function(m){if(Array.isArray(m))return s(m)}(m)||function(m){if("undefined"!=typeof Symbol&&null!=m[Symbol.iterator]||null!=m["@@iterator"])return Array.from(m)}(m)||o(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(m,b){if(m){if("string"==typeof m)return s(m,b);var y=Object.prototype.toString.call(m).slice(8,-1);return"Object"===y&&m.constructor&&(y=m.constructor.name),"Map"===y||"Set"===y?Array.from(m):"Arguments"===y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?s(m,b):void 0}}function s(m,b){(null==b||b>m.length)&&(b=m.length);for(var y=0,I=new Array(b);y<b;y++)I[y]=m[y];return I}var u=function(m){return"string"==typeof m?document.querySelector(m):m()},a=function(m,b){var y="string"==typeof m?document.createElement(m):m;for(var I in b){var P=b[I];if("inside"===I)P.append(y);else if("dest"===I)u(P[0]).insertAdjacentElement(P[1],y);else if("around"===I){var H=P;H.parentNode.insertBefore(y,H),y.append(H),null!=H.getAttribute("autofocus")&&H.focus()}else I in y?y[I]=P:y.setAttribute(I,P)}return y},c=function(m,b){return m=String(m).toLowerCase(),b?m.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):m},l=function(m,b){return a("mark",t({innerHTML:m},"string"==typeof b&&{class:b})).outerHTML},f=function(m,b){b.input.dispatchEvent(new CustomEvent(m,{bubbles:!0,detail:b.feedback,cancelable:!0}))},p=function(m,b,y){var I=y||{},P=I.mode,H=I.diacritics,C=I.highlight,D=c(b,H);if(b=String(b),m=c(m,H),"loose"===P){var M=(m=m.replace(/ /g,"")).length,N=0,q=Array.from(b).map((function(b,y){return N<M&&D[y]===m[N]&&(b=C?l(b,C):b,N++),b})).join("");if(N===M)return q}else{var _=D.indexOf(m);if(~_)return m=b.substring(_,_+m.length),C?b.replace(m,l(m,C)):b}},d=function(m,b){return new Promise((function(y,I){var P;return(P=m.data).cache&&P.store?y():new Promise((function(m,y){return"function"==typeof P.src?P.src(b).then(m,y):m(P.src)})).then((function(b){try{return m.feedback=P.store=b,f("response",m),y()}catch(m){return I(m)}}),I)}))},h=function(m,b){var y=b.data,I=b.searchEngine,P=[];y.store.forEach((function(H,C){var a=function(y){var C=y?H[y]:H,D="function"==typeof I?I(m,C):p(m,C,{mode:I,diacritics:b.diacritics,highlight:b.resultItem.highlight});if(D){var M={match:D,value:H};y&&(M.key=y),P.push(M)}};if(y.keys){var D,M=function(m,b){var y="undefined"!=typeof Symbol&&m[Symbol.iterator]||m["@@iterator"];if(!y){if(Array.isArray(m)||(y=o(m))||b&&m&&"number"==typeof m.length){y&&(m=y);var I=0,i=function(){};return{s:i,n:function(){return I>=m.length?{done:!0}:{done:!1,value:m[I++]}},e:function(m){throw m},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var P,H=!0,C=!1;return{s:function(){y=y.call(m)},n:function(){var m=y.next();return H=m.done,m},e:function(m){C=!0,P=m},f:function(){try{H||null==y.return||y.return()}finally{if(C)throw P}}}}(y.keys);try{for(M.s();!(D=M.n()).done;)a(D.value)}catch(m){M.e(m)}finally{M.f()}}else a()})),y.filter&&(P=y.filter(P));var H=P.slice(0,b.resultsList.maxResults);b.feedback={query:m,matches:P,results:H},f("results",b)},b="aria-expanded",y="aria-activedescendant",I="aria-selected",v=function(m,b){m.feedback.selection=t({index:b},m.feedback.results[b])},g=function(m){m.isOpen||((m.wrapper||m.input).setAttribute(b,!0),m.list.removeAttribute("hidden"),m.isOpen=!0,f("open",m))},w=function(m){m.isOpen&&((m.wrapper||m.input).setAttribute(b,!1),m.input.setAttribute(y,""),m.list.setAttribute("hidden",""),m.isOpen=!1,f("close",m))},O=function(m,b){var P=b.resultItem,H=b.list.getElementsByTagName(P.tag),C=!!P.selected&&P.selected.split(" ");if(b.isOpen&&H.length){var D,M,N=b.cursor;m>=H.length&&(m=0),m<0&&(m=H.length-1),b.cursor=m,N>-1&&(H[N].removeAttribute(I),C&&(M=H[N].classList).remove.apply(M,i(C))),H[m].setAttribute(I,!0),C&&(D=H[m].classList).add.apply(D,i(C)),b.input.setAttribute(y,H[b.cursor].id),b.list.scrollTop=H[m].offsetTop-b.list.clientHeight+H[m].clientHeight+5,b.feedback.cursor=b.cursor,v(b,m),f("navigate",b)}},A=function(m){O(m.cursor+1,m)},k=function(m){O(m.cursor-1,m)},L=function(m,b,y){(y=y>=0?y:m.cursor)<0||(m.feedback.event=b,v(m,y),f("selection",m),w(m))};function j(b,y){var I=this||m;return new Promise((function(m,P){var H,C;return H=y||((C=b.input)instanceof HTMLInputElement||C instanceof HTMLTextAreaElement?C.value:C.innerHTML),function(m,b,y){return b?b(m):m.length>=y}(H=b.query?b.query(H):H,b.trigger,b.threshold)?d(b,H).then((function(y){try{return b.feedback instanceof Error?m():(h(H,b),b.resultsList&&function(m){var b=m.resultsList,y=m.list,I=m.resultItem,P=m.feedback,H=P.matches,C=P.results;if(m.cursor=-1,y.innerHTML="",H.length||b.noResults){var D=new DocumentFragment;C.forEach((function(m,b){var y=a(I.tag,t({id:"".concat(I.id,"_").concat(b),role:"option",innerHTML:m.match,inside:D},I.class&&{class:I.class}));I.element&&I.element(y,m)})),y.append(D),b.element&&b.element(y,P),g(m)}else w(m)}(b),c.call(I))}catch(m){return P(m)}}),P):(w(b),c.call(I));function c(){return m()}}))}var S=function(m,b){for(var y in m)for(var I in m[y])b(y,I)},T=function(m){var b,y,I,P=m.events,H=(b=function(){return j(m)},y=m.debounce,function(){clearTimeout(I),I=setTimeout((function(){return b()}),y)}),C=m.events=t({input:t({},P&&P.input)},m.resultsList&&{list:P?t({},P.list):{}}),D={input:{input:function(){H()},keydown:function(b){!function(m,b){switch(m.keyCode){case 40:case 38:m.preventDefault(),40===m.keyCode?A(b):k(b);break;case 13:b.submit||m.preventDefault(),b.cursor>=0&&L(b,m);break;case 9:b.resultsList.tabSelect&&b.cursor>=0&&L(b,m);break;case 27:b.input.value="",w(b)}}(b,m)},blur:function(){w(m)}},list:{mousedown:function(m){m.preventDefault()},click:function(b){!function(m,b){var y=b.resultItem.tag.toUpperCase(),I=Array.from(b.list.querySelectorAll(y)),P=m.target.closest(y);P&&P.nodeName===y&&L(b,m,I.indexOf(P))}(b,m)}}};S(D,(function(b,y){(m.resultsList||"input"===y)&&(C[b][y]||(C[b][y]=D[b][y]))})),S(C,(function(b,y){m[b].addEventListener(y,C[b][y])}))};function E(b){var y=this||m;return new Promise((function(m,I){var P,H,C;if(P=b.placeHolder,C={role:"combobox","aria-owns":(H=b.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},a(b.input,t(t({"aria-controls":H.id,"aria-autocomplete":"both"},P&&{placeholder:P}),!b.wrapper&&t({},C))),b.wrapper&&(b.wrapper=a("div",t({around:b.input,class:b.name+"_wrapper"},C))),H&&(b.list=a(H.tag,t({dest:[H.destination,H.position],id:H.id,role:"listbox",hidden:"hidden"},H.class&&{class:H.class}))),T(b),b.data.cache)return d(b).then((function(m){try{return c.call(y)}catch(m){return I(m)}}),I);function c(){return f("init",b),m()}return c.call(y)}))}function x(b){var y=b.prototype;y.init=function(){E(this||m)},y.start=function(b){j(this||m,b)},y.unInit=function(){if((this||m).wrapper){var b=(this||m).wrapper.parentNode;b.insertBefore((this||m).input,(this||m).wrapper),b.removeChild((this||m).wrapper)}var y;S((y=this||m).events,(function(m,b){y[m].removeEventListener(b,y.events[m][b])}))},y.open=function(){g(this||m)},y.close=function(){w(this||m)},y.goTo=function(b){O(b,this||m)},y.next=function(){A(this||m)},y.previous=function(){k(this||m)},y.select=function(b){L(this||m,null,b)},y.search=function(m,b,y){return p(m,b,y)}}return function e(b){(this||m).options=b,(this||m).id=e.instances=(e.instances||0)+1,(this||m).name="autoComplete",(this||m).wrapper=1,(this||m).threshold=1,(this||m).debounce=0,(this||m).resultsList={position:"afterend",tag:"ul",maxResults:5},(this||m).resultItem={tag:"li"},function(m){var b=m.name,y=m.options,I=m.resultsList,P=m.resultItem;for(var H in y)if("object"===n(y[H]))for(var C in m[H]||(m[H]={}),y[H])m[H][C]=y[H][C];else m[H]=y[H];m.selector=m.selector||"#"+b,I.destination=I.destination||m.selector,I.id=I.id||b+"_list_"+m.id,P.id=P.id||b+"_result",m.input=u(m.selector)}(this||m),x.call(this||m,e),E(this||m)}},b=y();var I=b;export{I as default};

