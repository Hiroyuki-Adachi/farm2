import t from"process";var r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var e={};var s=t;e=e=ProgressBar;function ProgressBar(t,e){(this||r).stream=e.stream||s.stderr;if("number"==typeof e){var a=e;e={};e.total=a}else{e=e||{};if("string"!=typeof t)throw new Error("format required");if("number"!=typeof e.total)throw new Error("total required")}(this||r).fmt=t;(this||r).curr=e.curr||0;(this||r).total=e.total;(this||r).width=e.width||(this||r).total;(this||r).clear=e.clear;(this||r).chars={complete:e.complete||"=",incomplete:e.incomplete||"-",head:e.head||e.complete||"="};(this||r).renderThrottle=0!==e.renderThrottle?e.renderThrottle||16:0;(this||r).lastRender=-Infinity;(this||r).callback=e.callback||function(){};(this||r).tokens={};(this||r).lastDraw=""}ProgressBar.prototype.tick=function(t,e){0!==t&&(t=t||1);"object"==typeof t&&(e=t,t=1);e&&((this||r).tokens=e);0==(this||r).curr&&((this||r).start=new Date);(this||r).curr+=t;this.render();if((this||r).curr>=(this||r).total){this.render(void 0,true);(this||r).complete=true;this.terminate();this.callback(this||r)}else;};ProgressBar.prototype.render=function(t,e){e=void 0!==e&&e;t&&((this||r).tokens=t);if((this||r).stream.isTTY){var a=Date.now();var i=a-(this||r).lastRender;if(e||!(i<(this||r).renderThrottle)){(this||r).lastRender=a;var o=(this||r).curr/(this||r).total;o=Math.min(Math.max(o,0),1);var h=Math.floor(100*o);var l,n,c;var m=new Date-(this||r).start;var p=100==h?0:m*((this||r).total/(this||r).curr-1);var f=(this||r).curr/(m/1e3);var u=(this||r).fmt.replace(":current",(this||r).curr).replace(":total",(this||r).total).replace(":elapsed",isNaN(m)?"0.0":(m/1e3).toFixed(1)).replace(":eta",isNaN(p)||!isFinite(p)?"0.0":(p/1e3).toFixed(1)).replace(":percent",h.toFixed(0)+"%").replace(":rate",Math.round(f));var d=Math.max(0,(this||r).stream.columns-u.replace(":bar","").length);d&&"win32"===s.platform&&(d-=1);var v=Math.min((this||r).width,d);c=Math.round(v*o);n=Array(Math.max(0,c+1)).join((this||r).chars.complete);l=Array(Math.max(0,v-c+1)).join((this||r).chars.incomplete);c>0&&(n=n.slice(0,-1)+(this||r).chars.head);u=u.replace(":bar",n+l);if((this||r).tokens)for(var w in(this||r).tokens)u=u.replace(":"+w,(this||r).tokens[w]);if((this||r).lastDraw!==u){(this||r).stream.cursorTo(0);(this||r).stream.write(u);(this||r).stream.clearLine(1);(this||r).lastDraw=u}}}};ProgressBar.prototype.update=function(t,e){var s=Math.floor(t*(this||r).total);var a=s-(this||r).curr;this.tick(a,e)};ProgressBar.prototype.interrupt=function(t){(this||r).stream.clearLine();(this||r).stream.cursorTo(0);(this||r).stream.write(t);(this||r).stream.write("\n");(this||r).stream.write((this||r).lastDraw)};ProgressBar.prototype.terminate=function(){if((this||r).clear){if((this||r).stream.clearLine){(this||r).stream.clearLine();(this||r).stream.cursorTo(0)}}else(this||r).stream.write("\n")};var a=e;export default a;

