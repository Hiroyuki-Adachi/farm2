<div class="position-relative" style="height: 100vh;" data-controller="page-loader" data-page-loader-modules-value="pages/personal_informations/maps">
  <div id="map" class="position-absolute top-0 start-0 w-100 h-100"></div>
</div>
<%= hidden_field_tag :location, "[#{current_location}]" %>
<%= hidden_field_tag :organization_name, current_organization.name %>
<%= hidden_field_tag :user_id, current_user.id %>
<% @costs.each do |cost| %>
  <%= land_region_hidden_field(
    cost.land, 
    color: cost.work_type.bg_color_date(current_organization, @target), 
    text_color: cost.work_type.fg_color_date(current_organization, @target),
    work_type_id: cost.work_type_id)
  %>
<% end %>
<% content_for :head do %>
<script>
(g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})({
  key: "<%= ENV["GOOGLE_MAPS_API_KEY"]%>",
  v: "weekly"
});
</script>
<% end %>
