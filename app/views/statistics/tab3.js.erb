document.getElementById("tab").innerHTML = "<%= escape_javascript(render(partial: "tab3")) %>";
new Chart(document.getElementById("chart").getContext('2d'), {
    type: 'bar',
    data: {
      labels: <%= @total_all.map {|ta| ta[0] }.to_json.html_safe %>,
      datasets: [
            <% t("statistics.age").each_with_index do |age, i| %>
            {
              label: <%= age.to_json.html_safe %>,
              data: <%= @total_all.map {|ta| @total_age[[ta[0], i]].to_f } %>,
              backgroundColor: colors[<%= i%>],
              fill: false
            },
            <% end %>
        ]
    },
    options: {
      scales: {
        xAxes: [{
          stacked: true
        }],
        yAxes: [{
          stacked: true,
          ticks: {
              beginAtZero: true,
              min: 0
          }            
        }]
      }
    }
});
