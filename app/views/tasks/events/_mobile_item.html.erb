<!-- app/views/tasks/events/_mobile_item.html.erb -->
<div id="<%= dom_id(event, :event_item) %>"
     class="d-flex <%= mine ? 'justify-content-end' : 'justify-content-start' %>">
  <div class="d-flex align-items-start gap-2 <%= mine ? 'flex-row-reverse text-end' : '' %>" style="max-width: 85%;">
    <!-- バブル -->
    <div class="<%= mine ? 'bg-primary-subtle text-primary-emphasis border border-primary-subtle'
                         : 'bg-body-tertiary text-body border border-secondary-subtle' %>
                rounded-3 p-2 shadow-sm w-auto" style="min-width: 48%;">

      <div class="small <%= mine ? 'text-primary' : 'text-muted' %>">
        <span class="fw-bold"><%= event.actor_name %></span>・<%= event.created_at_display %>
      </div>

      <div class="mt-1 text-break">
        <%= raw event.human_message(mobile: true, mine: mine) %>
      </div>

      <% if event.comment.present? %>
        <div class="mt-2 p-2 rounded border bg-white text-body small">
          <%= render "tasks/comments/show_for_event", task: task, event: event, comment: event.comment, mobile: true %>
        </div>
      <% end %>
    </div>
    <%= event.my_message_read_count_display %>
    <%= event.other_message_unread_display %>
  </div>
</div>
