<h1>ガントチャート</h1>
<div class="container my-4"
   data-controller="gantt"
   data-gantt-update-url-value="<%= tasks_gantt_path %>"
   data-gantt-csrf-token-value="<%= form_authenticity_token %>">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <p class="mb-0 text-body-secondary small">
      表示期間: <%= @start_date %> 〜 <%= @end_date %>
    </p>
  </div>

  <div class="table-responsive" style="max-height: 70vh;">
    <table class="table table-sm table-bordered gantt-table mb-0">
      <thead class="table-light sticky-top">
        <tr>
          <th style="min-width: 220px;">タスク</th>
          <% @dates.each do |date| %>
            <th class="text-center align-middle small"
                data-gantt-target="headerCell">
              <%= date.day %><br>
              <span class="text-body-secondary"><%= date.strftime("%-m/%a") %></span>
            </th>
          <% end %>
        </tr>
      </thead>
      <tbody>
        <% @tasks.each do |task| %>
          <%= render "tasks/gantts/row", task: task %>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
