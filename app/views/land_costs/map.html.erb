<div class="row">
  <div class="col-md-8">
    <h1>土地利用地図</h1>
  </div>
  <div class="col-md-2">
    <%= date_field_tag :target, @target, {class: "form-control", data: {url: map_land_costs_path}, onchange: "changeTarget(this)"} %>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <div id="map" class="embed-responsive embed-responsive-16by9"></div>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <h3 id="land_info">&nbsp;</h3>
  </div>
</div>
<div class="row">
  <% @work_types.each_with_index do |work_type, i| %>
    <div class="btn-group" style="background-color: <%= work_type.bg_color%>;">
      <span id="work_type_<%= work_type.id %>" style="width:100px;"><%= work_type.name %></span>
      <span id="land_area_<%= work_type.id %>" class="label text-right area-sum" style="width: 50px;">0.0</span>
    </div>
  <% end %>
</div>
<div id="btn_toolbar" class="btn-toolbar">
  <div class="btn-group mr-2">
    <%= link_to '戻る', land_costs_path, class: "btn btn-outline-dark" %>
  </div>
</div>
<%= hidden_field_tag :location, "[#{current_location}]" %>
<%= hidden_field_tag :organization_name, current_organization.name %>
<% @costs.each do |cost| %>
  <%= hidden_field_tag :regions, cost.land.region, {id: "land_#{cost.land.id}", data: {id: cost.land.id, place: cost.land.place, area: cost.land.area, owner: cost.land.owner.name, color: cost.work_type.bg_color, "work-type" => cost.work_type_id}} %>
<% end %>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV["API_KEY"]%>" async defer></script>
<%= javascript_pack_tag 'lands-maps' %>
